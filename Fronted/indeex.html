<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Application Form</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3f37c9;
            --accent-color: #4895ef;
            --light-color: #FFF8F0; /* White-cream mix */
            --dark-color: #212529;
            --success-color: #4bb543;
            --error-color: #ff3333;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #ffffff;
            color: var(--dark-color);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            background: var(--light-color);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin: 20px 0;
        }

        header {
            display: flex;
            align-items: center;
            padding: 20px 40px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #fff;
            border-radius: 15px 15px 0 0;
        }

        .logo img {
            height: 60px;
            margin-right: 20px;
        }

        header h1 {
            font-size: 24px;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .form-container {
            padding: 30px;
        }

        .form-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .form-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 400;
            font-size: 16px;
            color: var(--dark-color);
        }

        .required-field::after {
            content: " *";
            color: var(--error-color);
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            font-family: 'Roboto', sans-serif;
            transition: all 0.3s ease;
            background-color: #ffffff;
        }

        textarea {
            height: 100px;
            resize: none;
        }

        input:focus, select:focus, textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
            background-color: #ffffff;
        }

        input[type="file"] {
            padding: 8px;
        }

        input[type="file"]::-webkit-file-upload-button {
            padding: 8px 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        input[type="file"]::-webkit-file-upload-button:hover {
            background-color: var(--secondary-color);
        }

        .error-message {
            color: var(--error-color);
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .has-error {
            border-color: var(--error-color) !important;
        }

        .has-error:focus {
            box-shadow: 0 0 0 3px rgba(255, 51, 51, 0.2) !important;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.3);
        }

        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3);
        }

        .btn-icon {
            margin-right: 8px;
        }

        .success-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background-color: white;
            border-radius: 16px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(0);
            animation: modalIn 0.4s ease;
        }

        @keyframes modalIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-icon {
            font-size: 60px;
            color: var(--success-color);
            margin-bottom: 20px;
            animation: bounce 1s ease;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--dark-color);
        }

        .modal-message {
            font-size: 14px;
            margin-bottom: 25px;
            color: #6c757d;
        }

        .ref-id-container {
            background-color: #f8f9fa;
            padding: 10px 15px;
            border-radius: 8px;
            font-family: 'Roboto', sans-serif;
            font-size: 16px;
            font-weight: 600;
            color: var(--primary-color);
            margin: 20px 0;
            display: inline-flex;
            align-items: center;
            cursor: pointer;
        }

        .ref-id {
            margin-right: 10px;
        }

        .copy-icon {
            font-size: 16px;
            color: var(--primary-color);
            transition: color 0.3s ease;
        }

        .ref-id-container:hover .copy-icon {
            color: var(--secondary-color);
        }

        .modal-btn {
            background-color: var(--primary-color);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            margin-top: 20px;
        }

        .modal-btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.3);
        }

        .two-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .joining-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .joining-option {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: #ffffff;
        }

        .joining-option:hover {
            border-color: var(--accent-color);
        }

        .joining-option.selected {
            border-color: var(--primary-color);
            background-color: rgba(67, 97, 238, 0.1);
            font-weight: 600;
        }

        .joining-option input {
            display: none;
        }

        footer {
            background-color: #2c2c2c;
            color: #fff;
            padding: 20px 40px;
            text-align: center;
            border-radius: 0 0 15px 15px;
        }

        footer p {
            font-size: 14px;
            margin-bottom: 10px;
        }

        footer a {
            color: var(--accent-color);
            text-decoration: none;
            margin: 0 10px;
            font-size: 14px;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .add-btn, .remove-btn {
            background-color: var(--primary-color);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            margin-top: 10px;
        }

        .remove-btn {
            background-color: var(--error-color);
        }

        .add-btn:hover {
            background-color: var(--secondary-color);
        }

        .remove-btn:hover {
            background-color: #cc0000;
        }

        .education-entry {
            border: 1px solid #e9ecef;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            background-color: #ffffff;
        }

        @media (max-width: 768px) {
            .two-columns {
                grid-template-columns: 1fr;
            }
            .form-container {
                padding: 20px;
            }
            header {
                flex-direction: column;
                align-items: flex-start;
            }
            .logo img {
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <img src="logo.jpg" alt="Company Logo">
            </div>
            <h1>Job Application Form</h1>
        </header>

        <div class="form-container">
            <form id="applicationForm" enctype="multipart/form-data">
                <!-- Section 1: Job Details -->
                <div id="jobDetails" class="form-section active">
                    <h2 style="font-size: 24px; color: var(--primary-color); margin-bottom: 20px;">Job Details</h2>
                    <div class="two-columns">
                        <div class="form-group">
                            <label for="jobRole" class="required-field">üíº Job Role</label>
                            <select id="jobRole" name="job_role" required>
                                <option value="" disabled selected>Select Job Role</option>
                                <option value="Software Developer">Software Developer</option>
                                <option value="Web Developer">Web Developer</option>
                                <option value="Backend Developer">Backend Developer</option>
                                <option value="Software Tester">Software Tester</option>
                                <option value="Java Developer">Java Developer</option>
                                <option value="Python Developer">Python Developer</option>
                                <option value="Cloud Engineer">Cloud Engineer</option>
                                <option value="Data Scientist">Data Scientist</option>
                                <option value="Business Analyst">Business Analyst</option>
                                <option value="DevOps Engineer">DevOps Engineer</option>
                                <option value="Machine Learning Engineer">Machine Learning Engineer</option>
                                <option value="Project Manager">Project Manager</option>
                                <option value="Full Stack Developer">Full Stack Developer</option>
                            </select>
                            <div class="error-message" id="jobRoleError"></div>
                        </div>

                        <div class="form-group">
                            <label for="expectedSalary" class="required-field">üí∞ Expected Salary (Per annum)</label>
                            <input type="number" id="expectedSalary" name="expected_salary" placeholder="Enter amount in INR" required min="100000" step="10000">
                            <div class="error-message" id="expectedSalaryError"></div>
                        </div>
                    </div>

                    <div class="two-columns">
                        <div class="form-group">
                            <label for="preferredLocation" class="required-field">üìç Preferred Location</label>
                            <select id="preferredLocation" name="preferred_location" required>
                                <option value="" disabled selected>Select Preferred Location</option>
                                <option value="Pune">Pune</option>
                                <option value="Bangalore">Bangalore</option>
                                <option value="Hyderabad">Hyderabad</option>
                                <option value="Mumbai">Mumbai</option>
                                <option value="Delhi">Delhi</option>
                            </select>
                            <div class="error-message" id="preferredLocationError"></div>
                        </div>

                        <div class="form-group">
                            <label for="noticePeriod" class="required-field">üïí Notice Period</label>
                            <div class="joining-options" id="noticePeriodOptions">
                                <label class="joining-option">
                                    <input type="radio" name="notice_period" value="Immediate" required>
                                    Immediate
                                </label>
                                <label class="joining-option">
                                    <input type="radio" name="notice_period" value="30 Days">
                                    30 Days
                                </label>
                                <label class="joining-option">
                                    <input type="radio" name="notice_period" value="60 Days">
                                    60 Days
                                </label>
                                <label class="joining-option">
                                    <input type="radio" name="notice_period" value="90 Days">
                                    90 Days
                                </label>
                            </div>
                            <div class="error-message" id="noticePeriodError"></div>
                        </div>
                    </div>

                    <div class="two-columns">
                        <div class="form-group">
                            <label for="technicalSkill1">üõ†Ô∏è Technical Skill 1</label>
                            <input type="text" id="technicalSkill1" name="technical_skill1" placeholder="E.g., JavaScript"
                                   pattern="^[A-Za-z0-9]+(?: [A-Za-z0-9]+)*$" minlength="2" maxlength="50"
                                   title="Enter a valid skill with 2-50 alphanumeric characters, single spaces">
                            <div class="error-message" id="technicalSkill1Error"></div>
                        </div>

                        <div class="form-group">
                            <label for="technicalSkill2">üõ†Ô∏è Technical Skill 2</label>
                            <input type="text" id="technicalSkill2" name="technical_skill2" placeholder="E.g., Python"
                                   pattern="^[A-Za-z0-9]+(?: [A-Za-z0-9]+)*$" minlength="2" maxlength="50"
                                   title="Enter a valid skill with 2-50 alphanumeric characters, single spaces">
                            <div class="error-message" id="technicalSkill2Error"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="keySkills" class="required-field">üîë Key Skills</label>
                        <textarea id="keySkills" name="key_skills" rows="3" placeholder="List your key skills (e.g., teamwork, problem-solving)" required
                                  minlength="10" maxlength="500"></textarea>
                        <div class="error-message" id="keySkillsError"></div>
                    </div>

                    <div class="button-container">
                        <div></div>
                        <button type="button" class="btn btn-primary" onclick="nextSection()">
                            <span class="btn-icon">‚û°Ô∏è</span> Next
                        </button>
                    </div>
                </div>

                <!-- Section 2: Personal Info -->
                <div id="personalInfo" class="form-section">
                    <h2 style="font-size: 24px; color: var(--primary-color); margin-bottom: 20px;">Personal Information</h2>
                    <div class="two-columns">
                        <div class="form-group">
                            <label for="fullName" class="required-field">üë§ Full Name</label>
                            <input type="text" id="fullName" name="full_name" placeholder="Enter your full name" required 
                                   pattern="^(?!\s)(?!.*\s{2,})([A-Za-z]+(?: [A-Za-z]+)*[A-Za-z])$" 
                                   minlength="3" maxlength="100"
                                   title="Enter a valid name with 3-100 alphabets, single spaces, no leading/trailing spaces">
                            <div class="error-message" id="fullNameError"></div>
                        </div>

                        <div class="form-group">
                            <label for="email" class="required-field">‚úâÔ∏è Email</label>
                            <input type="text" id="email" name="email" placeholder="Enter your email" required
                                   pattern="^[a-zA-Z0-9]{3,}@(gmail|outlook)\.(com|in|org|co)(\.[a-z]{2})?$"
                                   title="Enter a valid Gmail or Outlook email with .com, .in, .org, or .co extensions, min 3 characters for mail address">
                            <div class="error-message" id="emailError"></div>
                        </div>
                    </div>

                    <div class="two-columns">
                        <div class="form-group">
                            <label for="dob" class="required-field">üéÇ Date of Birth</label>
                            <input type="date" id="dob" name="dob" required>
                            <div class="error-message" id="dobError"></div>
                        </div>

                        <div class="form-group">
                            <label for="mobile" class="required-field">üì± Mobile Number</label>
                            <input type="tel" id="mobile" name="mobile" placeholder="Enter 10-digit mobile number" required
                                   pattern="[6-9][0-9]{9}" maxlength="10">
                            <div class="error-message" id="mobileError"></div>
                        </div>
                    </div>

                    <div class="two-columns">
                        <div class="form-group">
                            <label for="parentName" class="required-field">üë®‚Äçüëß Parent's Name</label>
                            <input type="text" id="parentName" name="parent_name" placeholder="Enter parent's name" required
                                   pattern="^(?!\s)(?!.*\s{2,})([A-Za-z]+(?: [A-Za-z]+)*[A-Za-z])$"
                                   minlength="3" maxlength="100"
                                   title="Enter a valid name with 3-100 alphabets, single spaces, no leading/trailing spaces">
                            <div class="error-message" id="parentNameError"></div>
                        </div>

                        <div class="form-group">
                            <label for="gender" class="required-field">‚öß Gender</label>
                            <select id="gender" name="gender" required>
                                <option value="" disabled selected>Select Gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                            <div class="error-message" id="genderError"></div>
                        </div>
                    </div>

                    <div class="two-columns">
                        <div class="form-group">
                            <label for="nationality" class="required-field">üåç Nationality</label>
                            <input type="text" id="nationality" name="nationality" placeholder="Enter nationality (e.g., Indian)" required
                                   pattern="^[A-Za-z]+$" minlength="3" maxlength="50"
                                   title="Enter a valid nationality with 3-50 alphabets">
                            <div class="error-message" id="nationalityError"></div>
                        </div>

                        <div class="form-group">
                            <label for="maritalStatus">üíç Marital Status</label>
                            <select id="maritalStatus" name="marital_status">
                                <option value="" disabled selected>Select Marital Status</option>
                                <option value="Single">Single</option>
                                <option value="Married">Married</option>
                                <option value="Divorced">Divorced</option>
                                <option value="Widowed">Widowed</option>
                            </select>
                            <div class="error-message" id="maritalStatusError"></div>
                        </div>
                    </div>

                    <h3 style="font-size: 20px; color: var(--primary-color); margin: 20px 0;">Address Information</h3>
                    <div class="form-group">
                        <label for="currentAddress" class="required-field">üè† Current Address</label>
                        <textarea id="currentAddress" name="current_address" rows="3" placeholder="Enter your current address" required
                                  minlength="5" maxlength="150"></textarea>
                        <div class="error-message" id="currentAddressError"></div>
                    </div>

                    <div class="form-group">
                        <label for="sameAsCurrent">
                            <input type="checkbox" id="sameAsCurrent" name="same_as_current" onclick="copyAddress()">
                            Same as Current Address
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="permanentAddress" class="required-field">üè† Permanent Address</label>
                        <textarea id="permanentAddress" name="permanent_address" rows="3" placeholder="Enter your permanent address" required
                                  minlength="5" maxlength="150"></textarea>
                        <div class="error-message" id="permanentAddressError"></div>
                    </div>

                    <div class="two-columns">
                        <div class="form-group">
                            <label for="state" class="required-field">üó∫Ô∏è State</label>
                            <select id="state" name="state" required>
                                <option value="" disabled selected>Select State</option>
                                <option value="Andhra Pradesh">Andhra Pradesh</option>
                                <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                <option value="Assam">Assam</option>
                                <option value="Bihar">Bihar</option>
                                <option value="Chhattisgarh">Chhattisgarh</option>
                                <option value="Goa">Goa</option>
                                <option value="Gujarat">Gujarat</option>
                                <option value="Haryana">Haryana</option>
                                <option value="Himachal Pradesh">Himachal Pradesh</option>
                                <option value="Jharkhand">Jharkhand</option>
                                <option value="Karnataka">Karnataka</option>
                                <option value="Kerala">Kerala</option>
                                <option value="Madhya Pradesh">Madhya Pradesh</option>
                                <option value="Maharashtra">Maharashtra</option>
                                <option value="Manipur">Manipur</option>
                                <option value="Meghalaya">Meghalaya</option>
                                <option value="Mizoram">Mizoram</option>
                                <option value="Nagaland">Nagaland</option>
                                <option value="Odisha">Odisha</option>
                                <option value="Punjab">Punjab</option>
                                <option value="Rajasthan">Rajasthan</option>
                                <option value="Sikkim">Sikkim</option>
                                <option value="Tamil Nadu">Tamil Nadu</option>
                                <option value="Telangana">Telangana</option>
                                <option value="Tripura">Tripura</option>
                                <option value="Uttar Pradesh">Uttar Pradesh</option>
                                <option value="Uttarakhand">Uttarakhand</option>
                                <option value="West Bengal">West Bengal</option>
                            </select>
                            <div class="error-message" id="stateError"></div>
                        </div>

                        <div class="form-group">
                            <label for="city" class="required-field">üèôÔ∏è City</label>
                            <input type="text" id="city" name="city" placeholder="Enter city" required
                                   pattern="^[A-Za-z]+(?: [A-Za-z]+)*$" minlength="3" maxlength="50"
                                   title="Enter a valid city name with 3-50 alphabets, single spaces">
                            <div class="error-message" id="cityError"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="zipcode" class="required-field">üìç Zipcode</label>
                        <input type="text" id="zipcode" name="zipcode" placeholder="Enter 6-digit zipcode" required
                               pattern="[0-9]{6}" maxlength="6">
                        <div class="error-message" id="zipcodeError"></div>
                    </div>

                    <div class="two-columns">
                        <div class="form-group">
                            <label for="emergencyContact" class="required-field">üö® Emergency Contact Number</label>
                            <input type="tel" id="emergencyContact" name="emergency_contact" placeholder="Enter 10-digit emergency contact number" required
                                   pattern="[6-9][0-9]{9}" maxlength="10">
                            <div class="error-message" id="emergencyContactError"></div>
                        </div>

                        <div class="form-group">
                            <label for="altMobile">üì± Alternate Mobile Number</label>
                            <input type="tel" id="altMobile" name="alt_mobile" placeholder="Enter 10-digit alternate mobile number"
                                   pattern="[6-9][0-9]{9}" maxlength="10">
                            <div class="error-message" id="altMobileError"></div>
                        </div>
                    </div>

                    <div class="two-columns">
                        <div class="form-group">
                            <label for="linkedin">üîó LinkedIn URL</label>
                            <input type="url" id="linkedin" name="linkedin" placeholder="Enter LinkedIn profile URL">
                            <div class="error-message" id="linkedinError"></div>
                        </div>

                        <div class="form-group">
                            <label for="github">üîó GitHub URL</label>
                            <input type="url" id="github" name="github" placeholder="Enter GitHub profile URL">
                            <div class="error-message" id="githubError"></div>
                        </div>
                    </div>

                    <div class="button-container">
                        <button type="button" class="btn btn-secondary" onclick="prevSection()">
                            <span class="btn-icon">‚¨ÖÔ∏è</span> Previous
                        </button>
                        <button type="button" class="btn btn-primary" onclick="nextSection()">
                            <span class="btn-icon">‚û°Ô∏è</span> Next
                        </button>
                    </div>
                </div>

                <!-- Section 3: Education -->
                <div id="educationDetails" class="form-section">
                    <h2 style="font-size: 24px; color: var(--primary-color); margin-bottom: 20px;">Education</h2>
                    <h3 style="font-size: 20px; color: var(--primary-color); margin-bottom: 15px;">Secondary Education (SSC)</h3>
                    <div class="education-entry" id="sscEntry">
                        <div class="two-columns">
                            <div class="form-group">
                                <label for="sscBoard" class="required-field">üè´ Board</label>
                                <input type="text" id="sscBoard" name="ssc_board" placeholder="Enter board (e.g., CBSE)" required
                                       pattern="^[A-Za-z]+(?: [A-Za-z]+)*$" minlength="2" maxlength="50"
                                       title="Enter a valid board name with 2-50 alphabets, single spaces">
                                <div class="error-message" id="sscBoardError"></div>
                            </div>

                            <div class="form-group">
                                <label for="sscYear" class="required-field">üìÖ Year of Passing</label>
                                <input type="number" id="sscYear" name="ssc_year" placeholder="Enter year" required min="1985" step="1">
                                <div class="error-message" id="sscYearError"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="sscPercentage" class="required-field">üìä Percentage/CGPA</label>
                            <input type="text" id="sscPercentage" name="ssc_percentage" placeholder="Enter percentage or CGPA (e.g., 85.67)" required
                                   pattern="^([1-9][0-9]?|100)(\.[0-9]{1,2})?$"
                                   title="Enter a valid percentage/CGPA between 1 and 100 with up to 2 decimal places (e.g., 85, 85.5, 85.67)">
                            <div class="error-message" id="sscPercentageError"></div>
                        </div>
                    </div>

                    <h3 style="font-size: 20px; color: var(--primary-color); margin-bottom: 15px;">Intermediate/Diploma</h3>
                    <div class="education-entry" id="intermediateEntry">
                        <div class="two-columns">
                            <div class="form-group">
                                <label for="intermediateBoard" class="required-field">üè´ Board</label>
                                <input type="text" id="intermediateBoard" name="intermediate_board" placeholder="Enter board (e.g., State Board)" required
                                       pattern="^[A-Za-z]+(?: [A-Za-z]+)*$" minlength="2" maxlength="50"
                                       title="Enter a valid board name with 2-50 alphabets, single spaces">
                                <div class="error-message" id="intermediateBoardError"></div>
                            </div>

                            <div class="form-group">
                                <label for="intermediateYear" class="required-field">üìÖ Year of Passing</label>
                                <input type="number" id="intermediateYear" name="intermediate_year" placeholder="Enter year" required min="1985" step="1">
                                <div class="error-message" id="intermediateYearError"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="intermediatePercentage" class="required-field">üìä Percentage/CGPA</label>
                            <input type="text" id="intermediatePercentage" name="intermediate_percentage" placeholder="Enter percentage or CGPA (e.g., 85.67)" required
                                   pattern="^([1-9][0-9]?|100)(\.[0-9]{1,2})?$"
                                   title="Enter a valid percentage/CGPA between 1 and 100 with up to 2 decimal places (e.g., 85, 85.5, 85.67)">
                            <div class="error-message" id="intermediatePercentageError"></div>
                        </div>
                    </div>

                    <div id="additionalEducation"></div>
                    <button type="button" class="add-btn" id="addEducationBtn" onclick="addEducationEntry()">Add New Education</button>

                    <div class="button-container">
                        <button type="button" class="btn btn-secondary" onclick="prevSection()">
                            <span class="btn-icon">‚¨ÖÔ∏è</span> Previous
                        </button>
                        <button type="button" class="btn btn-primary" onclick="nextSection()">
                            <span class="btn-icon">‚û°Ô∏è</span> Next
                        </button>
                    </div>
                </div>

                <!-- Section 4: Higher Education -->
                <div id="higherEducation" class="form-section">
                    <h2 style="font-size: 24px; color: var(--primary-color); margin-bottom: 20px;">Higher Education</h2>
                    <div class="two-columns">
                        <div class="form-group">
                            <label for="collegeName" class="required-field">üè´ College/University Name</label>
                            <input type="text" id="collegeName" name="college_name" placeholder="Enter college/university name" required
                                   pattern="^[A-Za-z]+(?: [A-Za-z]+)*$" minlength="3" maxlength="100"
                                   title="Enter a valid college name with 3-100 alphabets, single spaces">
                            <div class="error-message" id="collegeNameError"></div>
                        </div>

                        <div class="form-group">
                            <label for="qualification" class="required-field">üéì Qualification</label>
                            <select id="qualification" name="qualification" required>
                                <option value="" disabled selected>Select Qualification</option>
                                <option value="B.Tech">B.Tech</option>
                                <option value="B.E">B.E</option>
                                <option value="B.Sc">B.Sc</option>
                                <option value="BCA">BCA</option>
                                <option value="M.Tech">M.Tech</option>
                                <option value="M.Sc">M.Sc</option>
                                <option value="MCA">MCA</option>
                            </select>
                            <div class="error-message" id="qualificationError"></div>
                        </div>
                    </div>

                    <div class="two-columns">
                        <div class="form-group">
                            <label for="branch" class="required-field">üåø Branch</label>
                            <input type="text" id="branch" name="branch" placeholder="Enter branch (e.g., Computer Science)" required
                                   pattern="^[A-Za-z]+(?: [A-Za-z]+)*$" minlength="3" maxlength="50"
                                   title="Enter a valid branch name with 3-50 alphabets, single spaces">
                            <div class="error-message" id="branchError"></div>
                        </div>

                        <div class="form-group">
                            <label for="graduationYear" class="required-field">üìÖ Year of Passing</label>
                            <input type="number" id="graduationYear" name="graduation_year" placeholder="Enter year" required min="1985" step="1">
                            <div class="error-message" id="graduationYearError"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="graduationPercentage" class="required-field">üìä Percentage/CGPA</label>
                        <input type="text" id="graduationPercentage" name="graduation_percentage" placeholder="Enter percentage or CGPA (e.g., 85.67)" required
                               pattern="^([1-9][0-9]?|100)(\.[0-9]{1,2})?$"
                               title="Enter a valid percentage/CGPA between 1 and 100 with up to 2 decimal places (e.g., 85, 85.5, 85.67)">
                        <div class="error-message" id="graduationPercentageError"></div>
                    </div>

                    <div class="form-group">
                        <label for="certifications">üèÖ Additional Certifications</label>
                        <textarea id="certifications" name="certifications" rows="3" placeholder="Enter certification details (optional)"
                                  maxlength="500"></textarea>
                        <div class="error-message" id="certificationsError"></div>
                    </div>

                    <div class="button-container">
                        <button type="button" class="btn btn-secondary" onclick="prevSection()">
                            <span class="btn-icon">‚¨ÖÔ∏è</span> Previous
                        </button>
                        <button type="button" class="btn btn-primary" onclick="nextSection()">
                            <span class="btn-icon">‚û°Ô∏è</span> Next
                        </button>
                    </div>
                </div>

                <!-- Section 5: Experience -->
                <div id="experienceDetails" class="form-section">
                    <h2 style="font-size: 24px; color: var(--primary-color); margin-bottom: 20px;">Experience</h2>
                    <div class="form-group">
                        <label for="experienceStatus" class="required-field">üíº Are you an Experienced or Fresher?</label>
                        <select id="experienceStatus" name="experience_status" required onchange="toggleExperienceFields()">
                            <option value="" disabled selected>Select your experience status</option>
                            <option value="Fresher">Fresher</option>
                            <option value="Experienced">Experienced</option>
                        </select>
                        <div class="error-message" id="experienceStatusError"></div>
                    </div>

                    <div id="experienceFields" style="display: none;">
                        <div class="two-columns">
                            <div class="form-group">
                                <label for="yearsExperience" class="required-field">‚è≥ Years of Experience</label>
                                <input type="number" id="yearsExperience" name="years_experience" placeholder="Enter years of experience" min="1" max="40">
                                <div class="error-message" id="yearsExperienceError"></div>
                            </div>

                            <div class="form-group">
                                <label for="companyName" class="required-field">üè¢ Company Name</label>
                                <input type="text" id="companyName" name="company_name" placeholder="Enter company name"
                                       pattern="^[A-Za-z0-9]+(?: [A-Za-z0-9]+)*$" minlength="3" maxlength="100"
                                       title="Enter a valid company name with 3-100 alphanumeric characters, single spaces">
                                <div class="error-message" id="companyNameError"></div>
                            </div>
                        </div>

                        <div class="two-columns">
                            <div class="form-group">
                                <label for="designation" class="required-field">üíº Designation</label>
                                <input type="text" id="designation" name="designation" placeholder="Enter designation"
                                       pattern="^[A-Za-z]+(?: [A-Za-z]+)*$" minlength="3" maxlength="50"
                                       title="Enter a valid designation with 3-50 alphabets, single spaces">
                                <div class="error-message" id="designationError"></div>
                            </div>

                            <div class="form-group">
                                <label for="workLocation" class="required-field">üìç Work Location</label>
                                <input type="text" id="workLocation" name="work_location" placeholder="Enter work location"
                                       pattern="^[A-Za-z]+(?: [A-Za-z]+)*$" minlength="3" maxlength="50"
                                       title="Enter a valid location with 3-50 alphabets, single spaces">
                                <div class="error-message" id="workLocationError"></div>
                            </div>
                        </div>

                        <div class="two-columns">
                            <div class="form-group">
                                <label for="startDate" class="required-field">üìÖ Start Date (MM/YYYY)</label>
                                <input type="text" id="startDate" name="start_date" placeholder="MM/YYYY" required
                                    pattern="^(0[1-9]|1[0-2])\/[0-9]{4}$"
                                    title="Enter a valid date in MM/YYYY format (e.g., 01/2020)">
                                <div class="error-message" id="startDateError"></div>
                            </div>

                            <div class="form-group">
                                <label for="endDate" class="required-field">üìÖ End Date (MM/YYYY or Present)</label>
                                <input type="text" id="endDate" name="end_date" placeholder="MM/YYYY or Present" required
                                    pattern="^(0[1-9]|1[0-2])\/[0-9]{4}$|^Present$"
                                    title="Enter a valid date in MM/YYYY format (e.g., 12/2023) or 'Present'">
                                <div class="error-message" id="endDateError"></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="lastSalary">üí∞ Last Salary (Per annum)</label>
                            <input type="number" id="lastSalary" name="last_salary" placeholder="Enter amount in INR" min="100000" step="10000">
                            <div class="error-message" id="lastSalaryError"></div>
                        </div>
                    </div>

                    <div class="two-columns">
                        <div class="form-group">
                            <label for="referenceName">üë• Reference Name</label>
                            <input type="text" id="referenceName" name="reference_name" placeholder="Enter reference name"
                                   pattern="^[A-Za-z]+(?: [A-Za-z]+)*$" minlength="3" maxlength="100"
                                   title="Enter a valid name with 3-100 alphabets, single spaces">
                            <div class="error-message" id="referenceNameError"></div>
                        </div>

                        <div class="form-group">
                            <label for="referenceEmail">‚úâÔ∏è Reference Email</label>
                            <input type="text" id="referenceEmail" name="reference_email" placeholder="Enter reference email"
                                   pattern="^[a-zA-Z0-9]{3,}@(gmail|outlook)\.(com|in|org|co)(\.[a-z]{2})?$"
                                   title="Enter a valid Gmail or Outlook email with .com, .in, .org, or .co extensions">
                            <div class="error-message" id="referenceEmailError"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="resume" class="required-field">üìÑ Upload Resume (PDF only)</label>
                        <input type="file" id="resume" name="resume" accept=".pdf" required>
                        <div class="error-message" id="resumeError"></div>
                    </div>

                    <div class="form-group">
                        <label for="terms" class="required-field">
                            <input type="checkbox" id="terms" name="terms" required>
                            I agree to the terms and conditions
                        </label>
                        <div class="error-message" id="termsError"></div>
                    </div>

                    <div class="button-container">
                        <button type="button" class="btn btn-secondary" onclick="prevSection()">
                            <span class="btn-icon">‚¨ÖÔ∏è</span> Previous
                        </button>
                        <button type="submit" id="submitBtn" class="btn btn-primary">
                            <span class="btn-icon">‚úàÔ∏è</span> Submit Application
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <footer>
            <p>¬© 2025 Your Company Name. All rights reserved.</p>
            <p>Contact: contact@yourcompany.com | Phone: +91 123 456 7890</p>
            <p>
                <a href="#">Privacy Policy</a> | 
                <a href="#">Terms of Service</a> | 
                <a href="#">Careers</a>
            </p>
        </footer>
    </div>

    <!-- Success Modal -->
    <div class="success-modal" id="successModal">
        <div class="modal-content">
            <div class="modal-icon">‚úÖ</div>
            <h2 class="modal-title">Application Submitted Successfully!</h2>
            <p class="modal-message">Thank you for applying. We will review your application and get back to you soon.</p>
            <div class="ref-id-container" id="refIdContainer" onclick="copyRefId()">
                <span class="ref-id" id="refIdDisplay"></span>
                <span class="copy-icon">üìã</span>
            </div>
            <button class="modal-btn" onclick="closeModal()">Close</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            setDateConstraints();
            initNoticePeriodOptions();
            initFormValidation();
            initEducationEntries();
            restrictYearInputs();
            restrictSalaryInput();
            restrictExperienceInput();
            showSection(currentSection);
        });

        // Global variables
        let currentSection = 0;
        let isSubmitting = false;
        let educationCount = 0;
        const maxEducationEntries = 3;
        const sections = document.querySelectorAll('.form-section');
        const noticePeriodOptions = document.querySelectorAll('.joining-option');
        const successModal = document.getElementById('successModal');
        const refIdDisplay = document.getElementById('refIdDisplay');
        const BASE_URL = 'http://localhost:5000';

        // Navigation functions
        function nextSection() {
            if (validateCurrentSection()) {
                if (currentSection < sections.length - 1) {
                    currentSection++;
                    showSection(currentSection);
                }
            }
        }

        function prevSection() {
            if (currentSection > 0) {
                currentSection--;
                showSection(currentSection);
            }
        }

        function showSection(index) {
            sections.forEach((section, i) => {
                section.classList.toggle('active', i === index);
            });
        }

        // Notice period options
        function initNoticePeriodOptions() {
            noticePeriodOptions.forEach((option) => {
                option.addEventListener('click', function () {
                    noticePeriodOptions.forEach((opt) => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
        }

        // Education entry management
        function initEducationEntries() {
            const addBtn = document.getElementById('addEducationBtn');
            updateAddButton();
        }

        function addEducationEntry() {
            if (educationCount >= maxEducationEntries) return;

            educationCount++;
            const additionalEducation = document.getElementById('additionalEducation');
            const entryId = `additionalEducation${educationCount}`;
            const entryHtml = `
                <div class="education-entry" id="${entryId}">
                    <h3 style="font-size: 20px; color: var(--primary-color); margin-bottom: 15px;">Additional Education ${educationCount}</h3>
                    <div class="two-columns">
                        <div class="form-group">
                            <label for="additionalBoard${educationCount}" class="required-field">üè´ Board</label>
                            <input type="text" id="additionalBoard${educationCount}" name="additional_board_${educationCount}" placeholder="Enter board" required
                                   pattern="^[A-Za-z]+(?: [A-Za-z]+)*$" minlength="2" maxlength="50"
                                   title="Enter a valid board name with 2-50 alphabets, single spaces">
                            <div class="error-message" id="additionalBoard${educationCount}Error"></div>
                        </div>
                        <div class="form-group">
                            <label for="additionalYear${educationCount}" class="required-field">üìÖ Year of Passing</label>
                            <input type="number" id="additionalYear${educationCount}" name="additional_year_${educationCount}" placeholder="Enter year" required min="1985" step="1">
                            <div class="error-message" id="additionalYear${educationCount}Error"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="additionalPercentage${educationCount}" class="required-field">üìä Percentage/CGPA</label>
                        <input type="text" id="additionalPercentage${educationCount}" name="additional_percentage_${educationCount}" placeholder="Enter percentage or CGPA (e.g., 85.67)" required
                               pattern="^([1-9][0-9]?|100)(\.[0-9]{1,2})?$"
                               title="Enter a valid percentage/CGPA between 1 and 100 with up to 2 decimal places (e.g., 85, 85.5, 85.67)">
                        <div class="error-message" id="additionalPercentage${educationCount}Error"></div>
                    </div>
                    <button type="button" class="remove-btn" onclick="removeEducationEntry('${entryId}')">Remove</button>
                </div>
            `;
            additionalEducation.insertAdjacentHTML('beforeend', entryHtml);
            initInputValidation(document.getElementById(entryId));
            updateAddButton();
        }

        function removeEducationEntry(entryId) {
            const entry = document.getElementById(entryId);
            if (entry) {
                entry.remove();
                educationCount--;
                updateAddButton();
            }
        }

        function updateAddButton() {
            const addBtn = document.getElementById('addEducationBtn');
            if (educationCount >= maxEducationEntries) {
                addBtn.disabled = true;
                addBtn.style.opacity = '0.5';
                addBtn.style.cursor = 'not-allowed';
            } else {
                addBtn.disabled = false;
                addBtn.style.opacity = '1';
                addBtn.style.cursor = 'pointer';
            }
        }

        // Address copy function
        function copyAddress() {
            const checkbox = document.getElementById('sameAsCurrent');
            const currentAddress = document.getElementById('currentAddress');
            const permanentAddress = document.getElementById('permanentAddress');
            if (checkbox.checked) {
                permanentAddress.value = currentAddress.value;
                permanentAddress.disabled = true;
            } else {
                permanentAddress.value = '';
                permanentAddress.disabled = false;
            }
            validateInput(permanentAddress);
        }

        // Form validation
        function initFormValidation() {
            document.querySelectorAll('input, select, textarea').forEach((input) => {
                input.addEventListener('input', function () {
                    validateInput(this);
                });
                input.addEventListener('blur', function () {
                    validateInput(this);
                });
            });

            document.querySelectorAll('input[type="file"]').forEach((input) => {
                input.addEventListener('change', function () {
                    validateFileInput(this);
                });
            });

            document.getElementById('applicationForm').addEventListener('submit', function (e) {
                e.preventDefault();
                if (validateCurrentSection() && validateAllSections()) {
                    submitForm();
                } else {
                    const firstError = document.querySelector('.has-error');
                    if (firstError) {
                        firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            });
        }

        function initInputValidation(container) {
            container.querySelectorAll('input, select, textarea').forEach((input) => {
                input.addEventListener('input', function () {
                    validateInput(this);
                });
                input.addEventListener('blur', function () {
                    validateInput(this);
                });
            });
        }

        function validateCurrentSection() {
            let isValid = true;
            const currentSectionElement = sections[currentSection];
            const inputs = currentSectionElement.querySelectorAll('input[required], select[required], textarea[required]');
            inputs.forEach((input) => {
                if (!validateInput(input)) {
                    isValid = false;
                }
            });

            if (currentSection === 0) {
                const noticePeriodSelected = document.querySelector('input[name="notice_period"]:checked');
                if (!noticePeriodSelected) {
                    document.getElementById('noticePeriodError').textContent = 'Please select a notice period';
                    document.getElementById('noticePeriodError').style.display = 'block';
                    isValid = false;
                }
                const techSkill1 = document.getElementById('technicalSkill1').value.trim();
                const techSkill2 = document.getElementById('technicalSkill2').value.trim();
                if (!techSkill1 && !techSkill2) {
                    document.getElementById('technicalSkill1Error').textContent = 'At least one technical skill is required';
                    document.getElementById('technicalSkill1Error').style.display = 'block';
                    isValid = false;
                }
            }

            if (currentSection === 4) {
                const experienceStatus = document.getElementById('experienceStatus').value;
                if (experienceStatus === 'Experienced') {
                    const experienceInputs = document.querySelectorAll('#experienceFields input[required], #experienceFields select[required]');
                    experienceInputs.forEach((input) => {
                        if (!validateInput(input)) {
                            isValid = false;
                        }
                    });
                }
                const terms = document.getElementById('terms');
                if (!terms.checked) {
                    document.getElementById('termsError').textContent = 'You must agree to the terms and conditions';
                    document.getElementById('termsError').style.display = 'block';
                    isValid = false;
                }
            }

            return isValid;
        }

        function validateAllSections() {
            let isValid = true;
            sections.forEach((section, index) => {
                const inputs = section.querySelectorAll('input[required], select[required], textarea[required]');
                inputs.forEach((input) => {
                    if (!validateInput(input)) {
                        if (index !== currentSection) {
                            currentSection = index;
                            showSection(currentSection);
                        }
                        isValid = false;
                    }
                });
            });
            return isValid;
        }

        function validateInput(input) {
            const errorElement = document.getElementById(`${input.id}Error`);
            input.classList.remove('has-error');
            if (errorElement) {
                errorElement.style.display = 'none';
            }
            if (input.offsetParent === null) return true;

            // Check for required fields
            if (input.required && !input.value.trim()) {
                showError(input, errorElement, 'This field is required');
                return false;
            }

            // Check minimum length
            if (input.minLength && input.value.trim().length < input.minLength) {
                let message = '';
                if (input.id === 'fullName' || input.id === 'parentName') {
                    message = `Minimum 3 characters required`;
                } else if (input.id === 'currentAddress' || input.id === 'permanentAddress') {
                    message = `Minimum 5 characters required`;
                } else if (input.id === 'collegeName') {
                    message = `Minimum 3 characters required`;
                } else if (input.id === 'keySkills') {
                    message = `Minimum 10 characters required`;
                }
                if (message) {
                    showError(input, errorElement, message);
                    return false;
                }
            }

            switch (input.type) {
                case 'email':
                    if (!validateEmail(input.value)) {
                        showError(input, errorElement, 'Enter a valid email (Gmail/Outlook with .com/.in/.org/.co), min 3 characters');
                        return false;
                    }
                    break;
                case 'tel':
                    if (!validatePhone(input.value)) {
                        showError(input, errorElement, 'Enter a valid 10-digit mobile number starting with 6, 7, 8, or 9');
                        return false;
                    }
                    break;
                case 'number':
                    if (input.id === 'expectedSalary' || input.id === 'lastSalary') {
                        const salary = parseInt(input.value);
                        if (isNaN(salary) || salary < 100000) {
                            showError(input, errorElement, 'Salary must be at least ‚Çπ1,00,000');
                            return false;
                        } else if (salary > 99999999) {
                            showError(input, errorElement, 'Salary cannot exceed ‚Çπ9,99,99,999');
                            return false;
                        }
                    }
                    if (input.id === 'sscYear' || input.id === 'intermediateYear' || input.id === 'graduationYear' || input.id.includes('additionalYear')) {
                        if (!validateYearInput(input)) {
                            return false;
                        }
                    }
                    if (input.id === 'yearsExperience') {
                        const value = parseInt(input.value);
                        if (isNaN(value) || value < 1 || value > 40) {
                            showError(input, errorElement, 'Enter a valid experience between 1 and 40 years');
                            return false;
                        }
                    }
                    break;
                case 'date':
                    if (input.id === 'dob' && !validateDOB(input.value)) {
                        showError(input, errorElement, 'Age must be between 20 and 75 years');
                        return false;
                    }
                    break;
                case 'text':
                case 'textarea':
                    if (input.id === 'fullName' || input.id === 'parentName' || input.id === 'referenceName') {
                        if (!validateName(input.value)) {
                            showError(input, errorElement, 'Enter a valid name with 3-100 alphabets, single spaces, no leading/trailing spaces');
                            return false;
                        }
                    }
                    if (input.id === 'collegeName' || input.id === 'sscBoard' || input.id === 'intermediateBoard' || input.id.includes('additionalBoard') || input.id === 'branch' || input.id === 'designation' || input.id === 'workLocation' || input.id === 'preferredLocation' || input.id === 'city' || input.id === 'nationality' || input.id === 'technicalSkill1' || input.id === 'technicalSkill2' || input.id === 'companyName') {
                        if (input.value && !/^[A-Za-z0-9]+(?: [A-Za-z0-9]+)*$/.test(input.value)) {
                            showError(input, errorElement, `Enter a valid ${input.id.replace(/([A-Z])/g, ' $1').toLowerCase()} with ${input.minLength}-${input.maxLength} alphanumeric characters, single spaces`);
                            return false;
                        }
                    }
                    if (input.id === 'zipcode' && !/^[0-9]{6}$/.test(input.value)) {
                        showError(input, errorElement, 'Enter a valid 6-digit zipcode');
                        return false;
                    }
                    if (input.id === 'currentAddress' || input.id === 'permanentAddress') {
                        if (!validateAddress(input.value)) {
                            showError(input, errorElement, 'Enter a valid address with 5-150 characters, including alphanumeric, commas, hyphens, or spaces');
                            return false;
                        }
                    }
                    if (input.id === 'sscPercentage' || input.id === 'intermediatePercentage' || input.id === 'graduationPercentage' || input.id.includes('additionalPercentage')) {
                        if (!/^([1-9][0-9]?|100)(\.[0-9]{1,2})?$/.test(input.value)) {
                            showError(input, errorElement, 'Enter a valid percentage/CGPA between 1 and 100 with up to 2 decimal places (e.g., 85, 85.5, 85.67)');
                            return false;
                        }
                    }
                    if (input.id === 'startDate' && !/^(0[1-9]|1[0-2])\/[0-9]{4}$/.test(input.value)) {
                        showError(input, errorElement, 'Enter a valid date in MM/YYYY format (e.g., 01/2020)');
                        return false;
                    }
                    if (input.id === 'endDate' && !/^(0[1-9]|1[0-2])\/[0-9]{4}$|^Present$/.test(input.value)) {
                        showError(input, errorElement, 'Enter a valid date in MM/YYYY format (e.g., 12/2023) or "Present"');
                        return false;
                    }
                    break;
                case 'url':
                    if (input.value && !/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/.test(input.value)) {
                        showError(input, errorElement, 'Enter a valid URL (e.g., https://linkedin.com/in/username)');
                        return false;
                    }
                    break;
            }

            if (input.pattern && input.value.length >= input.minLength && !new RegExp(input.pattern).test(input.value)) {
                showError(input, errorElement, input.title);
                return false;
            }
            return true;
        }

        function validateFileInput(input) {
            const errorElement = document.getElementById(`${input.id}Error`);
            input.classList.remove('has-error');
            if (errorElement) {
                errorElement.style.display = 'none';
            }
            if (input.required && !input.files.length) {
                showError(input, errorElement, 'Please upload a PDF file');
                return false;
            }
            if (input.files.length) {
                const file = input.files[0];
                const validTypes = ['application/pdf'];
                const maxSize = 5 * 1024 * 1024;
                if (!validTypes.includes(file.type)) {
                    showError(input, errorElement, 'Only PDF files are allowed');
                    return false;
                }
                if (file.size > maxSize) {
                    showError(input, errorElement, 'File size must not exceed 5MB');
                    return false;
                }
            }
            return true;
        }

        function showError(input, errorElement, message) {
            input.classList.add('has-error');
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.style.display = 'block';
            }
        }

        function validateEmail(email) {
            return /^[a-zA-Z0-9]{3,}@(gmail|outlook)\.(com|in|org|co)(\.[ pojem].)*$/.test(email);
        }

        function validatePhone(phone) {
            return /^[6-9][0-9]{9}$/.test(phone);
        }

        function validateName(name) {
            return /^(?!\s)(?!.*\s{2,})([A-Za-z]+(?: [A-Za-z]+)*)?$/.test(name);
        }

        function validateAddress(address) {
            const regex = /^[a-zA-Z0-9]+(?:[,\-/:.]*\s*[a-zA-Z0-9]+)*$/;
            return regex.test(address);
        }

        function validateYearInput(input) {
            const value = parseInt(input.value);
            const currentYear = new Date().getFullYear();

            if (isNaN(value) || value < 1985 || value > currentYear) {
                showError(input, document.getElementById(`${input.id}Error`), `Enter a valid year between 1985 and ${currentYear}`);
                return false;
            }

            const sscYear = document.getElementById('sscYear').value;
            const interYear = document.getElementById('intermediateYear').value;
            const gradYear = document.getElementById('graduationYear').value;

            if (input.id === 'intermediateYear' && sscYear && value <= parseInt(sscYear) + 1) {
                showError(input, document.getElementById(`${input.id}Error`), 'Intermediate year must be at least 2 years after SSC year');
                return false;
            }

            if (input.id === 'graduationYear' && interYear && value <= parseInt(interYear) + 2) {
                showError(input, document.getElementById(`${input.id}Error`), 'Graduation year must be at least 3 years after Intermediate year');
                return false;
            }

            for (let i = 1; i <= educationCount; i++) {
                const additionalYear = document.getElementById(`additionalYear${i}`);
                if (additionalYear && input.id === `additionalYear${i}`) {
                    if (interYear && value <= parseInt(interYear) + 1) {
                        showError(input, document.getElementById(`${input.id}Error`), 'Additional education year must be at least 2 years after Intermediate year');
                        return false;
                    }
                }
            }

            return true;
        }

        function restrictYearInputs() {
            const yearInputs = document.querySelectorAll('input[id^="sscYear"], input[id^="intermediateYear"], input[id^="graduationYear"], input[id*="additionalYear"]');
            yearInputs.forEach(function(input) {
                input.addEventListener('keydown', function(e) {
                    if (!/[0-9]|Backspace|ArrowLeft|ArrowRight|ArrowUp|ArrowDown/.test(e.key)) {
                        e.preventDefault();
                    }
                });
                input.addEventListener('input', function(e) {
                    if (input.value.length > 4) {
                        input.value = input.value.slice(0, 4);
                    }
                    validateInput(input);
                });
            });
        }

        function restrictSalaryInput() {
            const salaryInputs = document.querySelectorAll('#expectedSalary, #lastSalary');
            salaryInputs.forEach((input) => {
                input.addEventListener('input', function(e) {
                    let value = input.value.replace(/\D/g, '');
                    if (value.length > 8) {
                        value = value.slice(0, 8);
                    }
                    input.value = value;
                    validateInput(input);
                });
            });
        }

        function restrictExperienceInput() {
            const experienceInput = document.getElementById('yearsExperience');
            if (experienceInput) {
                experienceInput.addEventListener('input', function(e) {
                    let value = experienceInput.value.replace(/\D/g, '');
                    if (value.length > 2) {
                        value = value.slice(0, 2);
                    }
                    experienceInput.value = value;
                    validateInput(experienceInput);
                });
            }
        }

        function validateDOB(dob) {
            const birthDate = new Date(dob);
            const today = new Date();
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            return age >= 20 && age <= 75;
        }

        function setDateConstraints() {
            const today = new Date();
            const dobInput = document.getElementById('dob');
            
            const minDOB = new Date();
            minDOB.setFullYear(today.getFullYear() - 75);
            const maxDOB = new Date();
            maxDOB.setFullYear(today.getFullYear() - 20);
            
            if (dobInput) {
                dobInput.setAttribute('min', minDOB.toISOString().split('T')[0]);
                dobInput.setAttribute('max', maxDOB.toISOString().split('T')[0]);
            }
        }

        function toggleExperienceFields() {
            const experienceStatus = document.getElementById('experienceStatus');
            const experienceFields = document.getElementById('experienceFields');
            if (experienceStatus.value === 'Experienced') {
                experienceFields.style.display = 'block';
                document.getElementById('yearsExperience').required = true;
                document.getElementById('companyName').required = true;
                document.getElementById('designation').required = true;
                document.getElementById('workLocation').required = true;
                document.getElementById('startDate').required = true;
                document.getElementById('endDate').required = true;
            } else {
                experienceFields.style.display = 'none';
                document.getElementById('yearsExperience').required = false;
                document.getElementById('companyName').required = false;
                document.getElementById('designation').required = false;
                document.getElementById('workLocation').required = false;
                document.getElementById('startDate').required = false;
                document.getElementById('endDate').required = false;
            }
        }

        function copyRefId() {
            const refId = document.getElementById('refIdDisplay').textContent;
            navigator.clipboard.writeText(refId)
                .then(() => {
                    alert('Reference ID copied to clipboard!');
                })
                .catch((err) => {
                    console.error('Failed to copy Reference ID:', err);
                    alert('Failed to copy Reference ID! Please try again.');
                });
        }

        async function submitForm() {
            if (isSubmitting) {
                console.log('Submission already in progress, ignoring duplicate request');
                return;
            }

            isSubmitting = true;
            const submitBtn = document.getElementById('submitBtn');
            if (submitBtn) {
                submitBtn.disabled = true;
                submitBtn.classList.add('submitting');
            }

            const form = document.getElementById('applicationForm');
            const formData = new FormData(form);

            try {
                console.log('Sending fetch request to server...');
                const response = await fetch(`${BASE_URL}/api/submit`, {
                    method: 'POST',
                    body: formData,
                });

                console.log('Fetch response received:', {
                    status: response.status,
                    statusText: response.statusText,
                    headers: Object.fromEntries(response.headers.entries()),
                });

                const text = await response.text();
                if (!text) {
                    throw new Error('Empty response from server!');
                }

                let result;
                try {
                    result = JSON.parse(text);
                } catch (jsonError) {
                    console.error('Failed to parse response as JSON:', text);
                    throw new Error(`Invalid JSON response: ${text}`);
                }

                console.log('Parsed server response:', result);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${result.error || 'Failed to submit application!'}`);
                }

                console.log('Application ID:', result.id);
                showSuccessModal(result.id);
                console.log('Application submitted successfully:', result.id);
            } catch (error) {
                console.error('Full error object:', {
                    message: error.message,
                    stack: error.stack,
                    url: `${BASE_URL}/api/submit`,
                });

                let errorMessage = '';
                if (error.message.includes('Failed to fetch')) {
                    errorMessage = 'Unable to connect to the server! Please ensure the server is running at http://localhost:5000.';
                } else if (error.message.includes('Empty response')) {
                    errorMessage = 'Server returned an empty response! Please check server logs for details.';
                } else if (error.message.includes('Invalid JSON')) {
                    errorMessage = 'Server returned an invalid response! Please check server logs for details.';
                } else {
                    errorMessage = `Submission failed: ${error.message}!`;
                }

                alert(`Error: ${errorMessage}`);
            } finally {
                isSubmitting = false;
                if (submitBtn) {
                    submitBtn.disabled = false;
                    submitBtn.classList.remove('submitting');
                }
            }
        }

        function showSuccessModal(refId) {
            refIdDisplay.textContent = refId;
            successModal.style.display = 'flex';
        }

        function closeModal() {
            successModal.style.display = 'none';
            document.getElementById('applicationForm').reset();
            currentSection = 0;
            showSection(currentSection);
            educationCount = 0;
            document.getElementById('additionalEducation').innerHTML = '';
            updateAddButton();
            toggleExperienceFields();
            noticePeriodOptions.forEach((opt) => opt.classList.remove('selected'));
            document.querySelectorAll('.error-message').forEach((el) => {
                el.style.display = 'none';
            });
            document.querySelectorAll('.has-error').forEach((el) => {
                el.classList.remove('has-error');
            });
            document.getElementById('sameAsCurrent').checked = false;
            document.getElementById('permanentAddress').disabled = false;
        }
    </script>
</body>
</html>