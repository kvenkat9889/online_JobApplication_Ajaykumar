<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Application Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .form-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            padding: 30px;
            margin-top: 30px;
            margin-bottom: 50px;
        }
        .form-header {
            text-align: center;
            margin-bottom: 30px;
            color: #2c3e50;
        }
        .form-section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .section-title {
            color: #3498db;
            margin-bottom: 20px;
            font-weight: 600;
        }
        .required-field::after {
            content: " *";
            color: #e74c3c;
        }
        .error-message {
            color: #e74c3c;
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }
        .file-upload-label {
            display: block;
            padding: 10px;
            background: #f8f9fa;
            border: 1px dashed #ddd;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
        }
        .file-upload-label:hover {
            background: #e9ecef;
        }
        .file-name {
            font-size: 0.9rem;
            margin-top: 5px;
            color: #6c757d;
        }
        .btn-submit {
            background-color: #3498db;
            border: none;
            padding: 10px 25px;
            font-weight: 600;
        }
        .btn-submit:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="form-container">
                    <div class="form-header">
                        <h2>Job Application Form</h2>
                        <p>Please fill in all required fields carefully</p>
                    </div>
                    
                    <form id="jobApplicationForm" enctype="multipart/form-data">
                        <!-- Personal Information Section -->
                        <div class="form-section">
                            <h4 class="section-title">Personal Information</h4>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="fullName" class="form-label required-field">Full Name</label>
                                    <input type="text" class="form-control" id="fullName" name="fullName" 
                                           pattern="^[a-zA-Z]+(?: [a-zA-Z]+)*$" 
                                           title="Only alphabets and single spaces allowed">
                                    <div class="error-message" id="fullNameError"></div>
                                </div>
                                <div class="col-md-6">
                                    <label for="parentsName" class="form-label">Father's/Mother's Name</label>
                                    <input type="text" class="form-control" id="parentsName" name="parentsName" 
                                           pattern="^[a-zA-Z]+(?: [a-zA-Z]+)*$">
                                    <div class="error-message" id="parentsNameError"></div>
                                </div>
                                <div class="col-md-4">
                                    <label for="gender" class="form-label required-field">Gender</label>
                                    <select class="form-select" id="gender" name="gender" required>
                                        <option value="">Select Gender</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                        <option value="Other">Other</option>
                                    </select>
                                    <div class="error-message" id="genderError"></div>
                                </div>
                                <div class="col-md-4">
                                    <label for="dob" class="form-label required-field">Date of Birth</label>
                                    <input type="date" class="form-control" id="dob" name="dob" required>
                                    <div class="error-message" id="dobError"></div>
                                </div>
                                <div class="col-md-4">
                                    <label for="maritalStatus" class="form-label">Marital Status</label>
                                    <select class="form-select" id="maritalStatus" name="maritalStatus">
                                        <option value="">Select</option>
                                        <option value="Single">Single</option>
                                        <option value="Married">Married</option>
                                        <option value="Divorced">Divorced</option>
                                        <option value="Widowed">Widowed</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="email" class="form-label required-field">Email Address</label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                    <div class="error-message" id="emailError"></div>
                                </div>
                                <div class="col-md-6">
                                    <label for="mobile" class="form-label required-field">Mobile Number</label>
                                    <input type="tel" class="form-control" id="mobile" name="mobile" 
                                           pattern="[0-9]{10}" maxlength="10" required>
                                    <div class="error-message" id="mobileError"></div>
                                </div>
                                <div class="col-md-6">
                                    <label for="alternateMobile" class="form-label">Alternate Mobile Number</label>
                                    <input type="tel" class="form-control" id="alternateMobile" name="alternateMobile" 
                                           pattern="[0-9]{10}" maxlength="10">
                                    <div class="error-message" id="alternateMobileError"></div>
                                </div>
                                <div class="col-md-6">
                                    <label for="aadhaar" class="form-label">Aadhaar Number</label>
                                    <input type="text" class="form-control" id="aadhaar" name="aadhaar" 
                                           pattern="[0-9]{12}" maxlength="12">
                                    <div class="error-message" id="aadhaarError"></div>
                                </div>
                                <div class="col-md-6">
                                    <label for="pan" class="form-label">PAN Number</label>
                                    <input type="text" class="form-control" id="pan" name="pan" 
                                           pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}" maxlength="10">
                                    <div class="error-message" id="panError"></div>
                                </div>
                                <div class="col-md-6">
                                    <label for="nationality" class="form-label">Nationality</label>
                                    <input type="text" class="form-control" id="nationality" name="nationality" value="Indian">
                                </div>
                            </div>
                        </div>

                        <!-- Address Information Section -->
                        <div class="form-section">
                            <h4 class="section-title">Address Information</h4>
                            <div class="row g-3">
                                <div class="col-12">
                                    <label for="currentAddress" class="form-label required-field">Current Address</label>
                                    <textarea class="form-control" id="currentAddress" name="currentAddress" rows="3" required></textarea>
                                    <div class="error-message" id="currentAddressError"></div>
                                </div>
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="sameAsCurrent" name="sameAsCurrent">
                                        <label class="form-check-label" for="sameAsCurrent">
                                            Same as Current Address
                                        </label>
                                    </div>
                                </div>
                                <div class="col-12" id="permanentAddressSection">
                                    <label for="permanentAddress" class="form-label required-field">Permanent Address</label>
                                    <textarea class="form-control" id="permanentAddress" name="permanentAddress" rows="3" required></textarea>
                                    <div class="error-message" id="permanentAddressError"></div>
                                </div>
                                <div class="col-md-4">
                                    <label for="state" class="form-label required-field">State</label>
                                    <select class="form-select" id="state" name="state" required>
                                        <option value="">Select State</option>
                                        <option value="Andhra Pradesh">Andhra Pradesh</option>
                                        <option value="Telangana">Telangana</option>
                                        <!-- Add all Indian states -->
                                    </select>
                                    <div class="error-message" id="stateError"></div>
                                </div>
                                <div class="col-md-4">
                                    <label for="city" class="form-label required-field">City</label>
                                    <input type="text" class="form-control" id="city" name="city" 
                                           pattern="^[a-zA-Z\s]*$" required>
                                    <div class="error-message" id="cityError"></div>
                                </div>
                                <div class="col-md-4">
                                    <label for="zipcode" class="form-label required-field">Zipcode</label>
                                    <input type="text" class="form-control" id="zipcode" name="zipcode" 
                                           pattern="[0-9]{6}" maxlength="6" required>
                                    <div class="error-message" id="zipcodeError"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Education Information Section -->
                        <div class="form-section">
                            <h4 class="section-title">Education Information</h4>
                            <div id="educationContainer">
                                <div class="education-entry">
                                    <div class="row g-3">
                                        <div class="col-md-4">
                                            <label for="qualificationLevel" class="form-label required-field">Qualification Level</label>
                                            <select class="form-select qualificationLevel" name="qualificationLevel[]" required>
                                                <option value="">Select</option>
                                                <option value="SSC">SSC/10th</option>
                                                <option value="Inter">Intermediate/12th</option>
                                                <option value="Diploma">Diploma</option>
                                                <option value="Graduation">Graduation</option>
                                                <option value="Post Graduation">Post Graduation</option>
                                                <option value="PhD">PhD</option>
                                            </select>
                                            <div class="error-message qualificationLevelError"></div>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="branch" class="form-label">Branch/Stream</label>
                                            <input type="text" class="form-control branch" name="branch[]">
                                        </div>
                                        <div class="col-md-4">
                                            <label for="institute" class="form-label required-field">Institute/College Name</label>
                                            <input type="text" class="form-control institute" name="institute[]" required>
                                            <div class="error-message instituteError"></div>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="board" class="form-label required-field">Board/University</label>
                                            <input type="text" class="form-control board" name="board[]" required>
                                            <div class="error-message boardError"></div>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="yearOfPassing" class="form-label required-field">Year of Passing</label>
                                            <input type="number" class="form-control yearOfPassing" name="yearOfPassing[]" required>
                                            <div class="error-message yearOfPassingError"></div>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="percentage" class="form-label">Percentage/CGPA</label>
                                            <input type="number" step="0.01" class="form-control percentage" name="percentage[]">
                                        </div>
                                        <div class="col-md-12">
                                            <label class="form-label">Upload Certificate</label>
                                            <label class="file-upload-label">
                                                <input type="file" class="form-control certificateFile" name="certificateFile[]" accept=".pdf,.jpg,.png" style="display: none;">
                                                <span>Choose File</span>
                                                <div class="file-name"></div>
                                            </label>
                                        </div>
                                    </div>
                                    <hr class="my-4">
                                </div>
                            </div>
                            <button type="button" class="btn btn-outline-primary btn-sm mt-2" id="addEducation">Add More Education</button>
                        </div>

                        <!-- Experience Information Section -->
                        <div class="form-section">
                            <h4 class="section-title">Experience Information</h4>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label required-field">Experience Status</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="experienceStatus" id="fresher" value="Fresher" checked>
                                        <label class="form-check-label" for="fresher">
                                            Fresher
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="experienceStatus" id="experienced" value="Experienced">
                                        <label class="form-check-label" for="experienced">
                                            Experienced
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="experienceContainer" style="display: none;">
                                <div class="experience-entry">
                                    <div class="row g-3">
                                        <div class="col-md-4">
                                            <label for="companyName" class="form-label required-field">Company Name</label>
                                            <input type="text" class="form-control companyName" name="companyName[]">
                                            <div class="error-message companyNameError"></div>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="designation" class="form-label required-field">Designation</label>
                                            <input type="text" class="form-control designation" name="designation[]">
                                            <div class="error-message designationError"></div>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="yearsOfExperience" class="form-label required-field">Years of Experience</label>
                                            <input type="number" step="0.1" class="form-control yearsOfExperience" name="yearsOfExperience[]">
                                            <div class="error-message yearsOfExperienceError"></div>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="workLocation" class="form-label">Work Location</label>
                                            <input type="text" class="form-control workLocation" name="workLocation[]">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="lastSalary" class="form-label">Last Salary (CTC)</label>
                                            <input type="number" class="form-control lastSalary" name="lastSalary[]">
                                        </div>
                                        <div class="col-12">
                                            <label class="form-label">Upload Experience Certificate</label>
                                            <label class="file-upload-label">
                                                <input type="file" class="form-control expCertificateFile" name="expCertificateFile[]" accept=".pdf,.jpg" style="display: none;">
                                                <span>Choose File</span>
                                                <div class="file-name"></div>
                                            </label>
                                        </div>
                                    </div>
                                    <hr class="my-4">
                                </div>
                                <button type="button" class="btn btn-outline-primary btn-sm mt-2" id="addExperience">Add More Experience</button>
                            </div>
                        </div>

                        <!-- Job Preferences Section -->
                        <div class="form-section">
                            <h4 class="section-title">Job Preferences</h4>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="jobRole" class="form-label required-field">Job Role Applied For</label>
                                    <select class="form-select" id="jobRole" name="jobRole" required>
                                        <option value="">Select Job Role</option>
                                        <option value="Software Developer">Software Developer</option>
                                        <option value="Web Developer">Web Developer</option>
                                        <option value="Data Analyst">Data Analyst</option>
                                        <!-- Add more job roles -->
                                    </select>
                                    <div class="error-message" id="jobRoleError"></div>
                                </div>
                                <div class="col-md-6">
                                    <label for="preferredLocation" class="form-label">Preferred Location</label>
                                    <input type="text" class="form-control" id="preferredLocation" name="preferredLocation">
                                </div>
                                <div class="col-md-6">
                                    <label for="expectedSalary" class="form-label">Expected Salary (â‚¹)</label>
                                    <input type="number" class="form-control" id="expectedSalary" name="expectedSalary">
                                </div>
                                <div class="col-md-6">
                                    <label for="noticePeriod" class="form-label">Notice Period</label>
                                    <select class="form-select" id="noticePeriod" name="noticePeriod">
                                        <option value="Immediate">Immediate</option>
                                        <option value="15 Days">15 Days</option>
                                        <option value="30 Days">30 Days</option>
                                        <option value="60 Days">60 Days</option>
                                        <option value="90 Days">90 Days</option>
                                    </select>
                                </div>
                                <div class="col-12">
                                    <label for="keySkills" class="form-label required-field">Key Skills</label>
                                    <textarea class="form-control" id="keySkills" name="keySkills" rows="2" required></textarea>
                                    <div class="error-message" id="keySkillsError"></div>
                                </div>
                                <div class="col-12">
                                    <label for="certifications" class="form-label">Certifications</label>
                                    <textarea class="form-control" id="certifications" name="certifications" rows="2"></textarea>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">Upload Certificate (if any)</label>
                                    <label class="file-upload-label">
                                        <input type="file" class="form-control" id="certificateFile" name="certificateFile" accept=".pdf,.jpg,.png">
                                        <span>Choose File</span>
                                        <div class="file-name"></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- References Section -->
                        <div class="form-section">
                            <h4 class="section-title">References</h4>
                            <div id="referenceContainer">
                                <div class="reference-entry">
                                    <div class="row g-3">
                                        <div class="col-md-4">
                                            <label for="referenceName" class="form-label">Reference Name</label>
                                            <input type="text" class="form-control referenceName" name="referenceName[]">
                                        </div>
                                        <div class="col-md-4">
                                            <label for="relation" class="form-label">Relation</label>
                                            <input type="text" class="form-control relation" name="relation[]">
                                        </div>
                                        <div class="col-md-4">
                                            <label for="referenceContact" class="form-label">Reference Contact Number</label>
                                            <input type="tel" class="form-control referenceContact" name="referenceContact[]" pattern="[0-9]{10}" maxlength="10">
                                        </div>
                                        <div class="col-12">
                                            <label for="referenceEmail" class="form-label">Reference Email</label>
                                            <input type="email" class="form-control referenceEmail" name="referenceEmail[]">
                                        </div>
                                    </div>
                                    <hr class="my-4">
                                </div>
                            </div>
                            <button type="button" class="btn btn-outline-primary btn-sm mt-2" id="addReference">Add More Reference</button>
                        </div>

                        <!-- Documents Upload Section -->
                        <div class="form-section">
                            <h4 class="section-title">Documents Upload</h4>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label required-field">Resume/CV Upload</label>
                                    <label class="file-upload-label">
                                        <input type="file" class="form-control" id="resume" name="resume" accept=".pdf,.doc,.docx" required>
                                        <span>Choose File (PDF/DOC, max 5MB)</span>
                                        <div class="file-name"></div>
                                    </label>
                                    <div class="error-message" id="resumeError"></div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label required-field">Passport Size Photo</label>
                                    <label class="file-upload-label">
                                        <input type="file" class="form-control" id="photo" name="photo" accept=".jpg,.png" required>
                                        <span>Choose File (JPG/PNG, max 500KB)</span>
                                        <div class="file-name"></div>
                                    </label>
                                    <div class="error-message" id="photoError"></div>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">ID Proof Upload (Aadhaar/PAN)</label>
                                    <label class="file-upload-label">
                                        <input type="file" class="form-control" id="idProof" name="idProof" accept=".pdf,.jpg,.png">
                                        <span>Choose File (PDF/JPG/PNG, max 2MB)</span>
                                        <div class="file-name"></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Declaration Section -->
                        <div class="form-section">
                            <h4 class="section-title">Declaration</h4>
                            <div class="row g-3">
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="agreeTerms" name="agreeTerms" required>
                                        <label class="form-check-label required-field" for="agreeTerms">
                                            I hereby declare that all the information provided in this application is true and correct to the best of my knowledge.
                                        </label>
                                        <div class="error-message" id="agreeTermsError"></div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label for="signature" class="form-label">Signature</label>
                                    <input type="text" class="form-control" id="signature" name="signature">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Date</label>
                                    <input type="text" class="form-control" value="<?php echo date('d/m/Y'); ?>" readonly>
                                </div>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="text-center mt-4">
                            <button type="submit" class="btn btn-primary btn-submit">Submit Application</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Same as current address checkbox
            document.getElementById('sameAsCurrent').addEventListener('change', function() {
                const permanentAddressSection = document.getElementById('permanentAddressSection');
                if (this.checked) {
                    permanentAddressSection.style.display = 'none';
                    document.getElementById('permanentAddress').value = document.getElementById('currentAddress').value;
                } else {
                    permanentAddressSection.style.display = 'block';
                }
            });

            // Experience status radio buttons
            document.querySelectorAll('input[name="experienceStatus"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const experienceContainer = document.getElementById('experienceContainer');
                    if (this.value === 'Experienced') {
                        experienceContainer.style.display = 'block';
                    } else {
                        experienceContainer.style.display = 'none';
                    }
                });
            });

            // Add education entry
            document.getElementById('addEducation').addEventListener('click', function() {
                const container = document.getElementById('educationContainer');
                const newEntry = container.firstElementChild.cloneNode(true);
                newEntry.querySelectorAll('input').forEach(input => input.value = '');
                newEntry.querySelectorAll('select').forEach(select => select.value = '');
                newEntry.querySelectorAll('.file-name').forEach(el => el.textContent = '');
                container.appendChild(newEntry);
            });

            // Add experience entry
            document.getElementById('addExperience').addEventListener('click', function() {
                const container = document.getElementById('experienceContainer');
                const newEntry = container.querySelector('.experience-entry').cloneNode(true);
                newEntry.querySelectorAll('input').forEach(input => input.value = '');
                newEntry.querySelectorAll('.file-name').forEach(el => el.textContent = '');
                container.insertBefore(newEntry, this);
            });

            // Add reference entry
            document.getElementById('addReference').addEventListener('click', function() {
                const container = document.getElementById('referenceContainer');
                const newEntry = container.firstElementChild.cloneNode(true);
                newEntry.querySelectorAll('input').forEach(input => input.value = '');
                container.appendChild(newEntry);
            });

            // File upload display
            document.querySelectorAll('input[type="file"]').forEach(input => {
                input.addEventListener('change', function() {
                    const fileName = this.files[0] ? this.files[0].name : 'No file chosen';
                    const fileDisplay = this.closest('.file-upload-label').querySelector('.file-name');
                    fileDisplay.textContent = fileName;
                });
            });

            // Form validation
            document.getElementById('jobApplicationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validate all required fields
                let isValid = true;
                
                // Personal Information validation
                if (!document.getElementById('fullName').value.match(/^[a-zA-Z]+(?: [a-zA-Z]+)*$/)) {
                    showError('fullNameError', 'Invalid name format (only alphabets and single spaces allowed)');
                    isValid = false;
                }
                
                // Add validation for other fields as needed
                
                if (isValid) {
                    // Submit form via AJAX
                    submitForm();
                }
            });
            
            function showError(elementId, message) {
                const errorElement = document.getElementById(elementId);
                errorElement.textContent = message;
                errorElement.style.display = 'block';
            }
            
            function submitForm() {
                const formData = new FormData(document.getElementById('jobApplicationForm'));
                
               fetch('http://localhost:3000/submit-application', {

                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('Application submitted successfully!');
                        // Reset form or redirect
                    } else {
                        alert('Error: ' + data.message);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while submitting the form.');
                });
            }
        });
    </script>
</body>
</html>