<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Application Form</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            background-color: #f3f4f6;
            color: #374151;
        }
        header {
            background-color: #1f2937;
            padding: 16px 0;
            color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 24px;
        }
        .logo-quote-container {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        .logo-container {
            max-width: 200px;
        }
        .logo-img {
            height: 40px;
            max-width: 100%;
            object-fit: contain;
        }
        .quote {
            font-style: italic;
            font-size: 16px;
        }
        nav a {
            color: white;
            text-decoration: none;
            margin-left: 24px;
            font-size: 16px;
            transition: color 0.3s;
        }
        nav a:hover {
            color: #93c5fd;
        }
        .container {
            max-width: 1200px;
            margin: 32px auto;
            padding: 0 24px;
        }
        .form-container {
            background-color: white;
            border-radius: 8px;
            padding: 32px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .form-content {
            max-width: 800px;
            margin: 0 auto;
        }
        .form-section {
            display: none;
        }
        .form-section.active {
            display: block;
        }
        .section-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }
        .icon-container {
            background-color: #2563eb;
            border-radius: 50%;
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .icon {
            width: 24px;
            height: 24px;
            stroke: white;
        }
        .section-title {
            font-size: 24px;
            font-weight: 600;
        }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        .form-label {
            font-weight: 500;
            margin-bottom: 8px;
        }
        .required-field::after {
            content: '*';
            color: #ef4444;
            margin-left: 4px;
        }
        .form-input, .form-select, .form-textarea {
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        .form-input.invalid, .form-select.invalid, .form-textarea.invalid {
            border-color: #ef4444;
        }
        .error-message {
            color: #ef4444;
            font-size: 12px;
            margin-top: 4px;
            display: none;
        }
        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 32px;
        }
        .button {
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .button-primary {
            background-color: #2563eb;
            color: white;
        }
        .button-primary:hover {
            background-color: #1d4ed8;
        }
        .button-secondary {
            background-color: #e5e7eb;
            color: #374151;
        }
        .button-secondary:hover:not(:disabled) {
            background-color: #d1d5db;
        }
        .button-secondary:disabled {
            background-color: #f3f4f6;
            cursor: not-allowed;
        }
        .form-page-indicator {
            text-align: center;
            margin-top: 24px;
            font-size: 16px;
            color: #6b7280;
        }
        .education-section {
            margin-bottom: 24px;
            padding: 16px;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            position: relative;
        }
        .education-title {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 16px;
        }
        .remove-education {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            cursor: pointer;
            color: #ef4444;
        }
        .skills-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }
        .skill-tag {
            background-color: #e5e7eb;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .remove-skill {
            cursor: pointer;
            font-weight: bold;
        }
        .file-upload {
            border: 2px dashed #d1d5db;
            border-radius: 4px;
            padding: 24px;
            text-align: center;
            transition: border-color 0.3s;
        }
        .file-upload.has-file {
            border-style: solid;
            border-color: #2563eb;
        }
        .file-upload-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 16px;
        }
        .file-upload-text {
            margin-bottom: 8px;
        }
        .file-upload-link {
            color: #2563eb;
            text-decoration: underline;
            cursor: pointer;
        }
        .file-upload-info {
            font-size: 12px;
            color: #6b7280;
        }
        .file-preview {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background-color: #f0f4ff;
            border-radius: 4px;
        }
        .file-info {
            display: flex;
            flex-direction: column;
        }
        .file-name {
            font-weight: 500;
        }
        .file-type {
            font-size: 12px;
            color: #6b7280;
        }
        .remove-file {
            background: none;
            border: none;
            color: #ef4444;
            cursor: pointer;
        }
        .checkbox-label {
            display: flex;
            align-items: center;
            font-size: 16px;
        }
        .checkbox-subtext {
            font-size: 12px;
            color: #6b7280;
            margin-top: 4px;
        }
        .checkbox-link {
            color: #2563eb;
            text-decoration: underline;
        }
        footer {
            background-color: #1f2937;
            color: white;
            padding: 16px 0;
            margin-top: 32px;
        }
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .footer-info a {
            color: white;
            text-decoration: none;
            margin: 0 8px;
        }
        .footer-info a:hover {
            text-decoration: underline;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-overlay.active {
            display: flex;
        }
        .modal {
            background: white;
            border-radius: 8px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .modal-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            border-bottom: 1px solid #e5e7eb;
        }
        .modal-icon {
            width: 24px;
            height: 24px;
            stroke: #2563eb;
        }
        .modal-title {
            font-size: 20px;
            font-weight: 600;
        }
        .modal-section {
            padding: 16px;
        }
        .modal-section-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 8px;
        }
        .modal-section-text {
            font-size: 14px;
            color: #374151;
        }
        .modal-footer {
            padding: 16px;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        .confirmation-details {
            padding: 16px;
        }
        .confirmation-section {
            margin-bottom: 24px;
        }
        .confirmation-section-title {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 12px;
        }
        .confirmation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
        }
        .confirmation-item {
            display: flex;
            flex-direction: column;
        }
        .confirmation-label {
            font-weight: 500;
            color: #6b7280;
            font-size: 14px;
        }
        .confirmation-value {
            font-size: 16px;
        }
        .success-modal {
            text-align: center;
        }
        .success-icon-container {
            background-color: #dcfce7;
            border-radius: 50%;
            width: 64px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 24px auto;
        }
        .success-icon {
            width: 32px;
            height: 32px;
            stroke: #22c55e;
        }
        .success-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        .success-message {
            font-size: 16px;
            color: #374151;
            margin-bottom: 8px;
        }
        .reference-id {
            font-weight: 500;
        }
        .submit-icon {
            width: 20px;
            height: 20px;
        }
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            .header-container {
                flex-direction: column;
                gap: 16px;
            }
            .logo-quote-container {
                flex-direction: column;
                align-items: center;
            }
            nav {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 16px;
            }
            .footer-container {
                flex-direction: column;
                gap: 8px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo-quote-container">
                <div class="logo-container">
                    <img src="/logo.jpg" alt="Company Logo" class="logo-img">
                </div>
                <div class="quote">"Empowering careers with opportunities"</div>
            </div>
            <nav>
                <a href="#">Home</a>
                <a href="#">About Us</a>
                <a href="#">Contact</a>
                <a href="#">Help</a>
            </nav>
        </div>
    </header>

    <!-- Form Container -->
    <main class="container">
        <div class="form-container">
            <!-- Form Content -->
            <div class="form-content">
                <form id="applicationForm" enctype="multipart/form-data">
                    <!-- Page 1: Personal Details -->
                    <div class="form-section active" id="page1">
                        <div class="section-header">
                            <div class="icon-container">
                                <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                            </div>
                            <h2 class="section-title">Personal Details</h2>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label required-field">Full Name</label>
                                <input type="text" name="full_name" required class="form-input" maxlength="255" pattern="^[a-zA-Z ]+$" title="Only alphabets and spaces allowed">
                                <div class="error-message">Please enter a valid name (only letters and spaces)</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Email</label>
                                <input type="email" name="email" required class="form-input" maxlength="255">
                                <div class="error-message">Please enter a valid email address</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Mobile</label>
                                <input type="tel" name="mobile" required class="form-input" maxlength="20" pattern="^[0-9]{10,15}$" title="10-15 digits only">
                                <div class="error-message">Please enter a valid mobile number (10-15 digits)</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Date of Birth</label>
                                <input type="date" name="dob" required class="form-input" min="" max="">
                                <div class="error-message">Age must be between 18 and 70 years</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Parent's Name</label>
                                <input type="text" name="parent_name" required class="form-input" maxlength="255" pattern="^[a-zA-Z ]+$" title="Only alphabets and spaces allowed">
                                <div class="error-message">Please enter a valid name (only letters and spaces)</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Gender</label>
                                <select name="gender" required class="form-select">
                                    <option value="">Select Gender</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                    <option value="Prefer not to say">Prefer not to say</option>
                                </select>
                                <div class="error-message">Please select your gender</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Nationality</label>
                                <input type="text" name="nationality" required class="form-input" maxlength="100" pattern="^[a-zA-Z ]+$" title="Only alphabets and spaces allowed">
                                <div class="error-message">Please enter a valid nationality</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Marital Status</label>
                                <select name="marital_status" class="form-select">
                                    <option value="">Select Marital Status</option>
                                    <option value="Single">Single</option>
                                    <option value="Married">Married</option>
                                    <option value="Divorced">Divorced</option>
                                    <option value="Widowed">Widowed</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="section-header" style="margin-top: 32px;">
                            <div class="icon-container">
                                <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                            </div>
                            <h2 class="section-title">Address</h2>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label required-field">Current Address</label>
                                <textarea name="current_address" rows="3" required class="form-textarea"></textarea>
                                <div class="error-message">Please enter your current address</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Permanent Address</label>
                                <textarea name="permanent_address" rows="3" required class="form-textarea"></textarea>
                                <div class="error-message">Please enter your permanent address</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">State</label>
                                <input type="text" name="state" required class="form-input" maxlength="100">
                                <div class="error-message">Please enter your state</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">City</label>
                                <input type="text" name="city" required class="form-input" maxlength="100">
                                <div class="error-message">Please enter your city</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Zipcode</label>
                                <input type="text" name="zipcode" required class="form-input" maxlength="20" pattern="^[0-9]+$" title="Only digits allowed">
                                <div class="error-message">Please enter a valid zipcode</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Emergency Contact</label>
                                <input type="text" name="emergency_contact" required class="form-input" maxlength="255" pattern="^[0-9]{10,15}$" title="10-15 digits only">
                                <div class="error-message">Please enter a valid emergency contact number</div>
                            </div>
                        </div>
                        
                        <div class="form-navigation">
                            <button type="button" class="button button-secondary" disabled>Previous</button>
                            <button type="button" class="button button-primary next-page">Next</button>
                        </div>
                    </div>

                    <!-- Page 2: Education and Job Details -->
                    <div class="form-section" id="page2">
                        <div class="section-header">
                            <div class="icon-container">
                                <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                </svg>
                            </div>
                            <h2 class="section-title">Educational Details</h2>
                        </div>
                        <div>
                            <!-- SSC (Mandatory) -->
                            <div class="education-section">
                                <h3 class="education-title">Secondary School Certificate (SSC) <span style="color: #ef4444;">*</span></h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label class="form-label required-field">Board</label>
                                        <input type="text" name="ssc_board" required class="form-input" maxlength="255">
                                        <div class="error-message">Please enter your SSC board</div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label required-field">Year</label>
                                        <input type="number" name="ssc_year" required min="1960" max="2035" class="form-input">
                                        <div class="error-message">Please enter a valid year (1960-2035)</div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label required-field">Percentage</label>
                                        <input type="text" name="ssc_percentage" required class="form-input" maxlength="10" pattern="^[0-9.]+$" title="Only numbers and decimal point allowed">
                                        <div class="error-message">Please enter a valid percentage</div>
                                    </div>
                                </div>
                            </div>
                            <!-- Intermediate (Optional) -->
                            <div class="education-section" id="intermediateSection">
                                <h3 class="education-title">Intermediate</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label class="form-label">Board</label>
                                        <input type="text" name="intermediate_board" class="form-input" maxlength="255">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Year</label>
                                        <input type="number" name="intermediate_year" min="1960" max="2035" class="form-input">
                                        <div class="error-message">Please enter a valid year</div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Percentage</label>
                                        <input type="text" name="intermediate_percentage" class="form-input" maxlength="10" pattern="^[0-9.]+$" title="Only numbers and decimal point allowed">
                                        <div class="error-message">Please enter a valid percentage</div>
                                    </div>
                                </div>
                            </div>
                            <!-- Graduation (Optional) -->
                            <div class="education-section" id="graduationSection">
                                <h3 class="education-title">Graduation</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label class="form-label">College Name</label>
                                        <input type="text" name="college_name" class="form-input" maxlength="255">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Qualification</label>
                                        <input type="text" name="qualification" class="form-input" maxlength="255">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Branch</label>
                                        <input type="text" name="branch" class="form-input" maxlength="255">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Graduation Year</label>
                                        <input type="number" name="graduation_year" min="1960" max="2035" class="form-input">
                                        <div class="error-message">Please enter a valid year</div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Graduation Percentage</label>
                                        <input type="text" name="graduation_percentage" class="form-input" maxlength="10" pattern="^[0-9.]+$" title="Only numbers and decimal point allowed">
                                        <div class="error-message">Please enter a valid percentage</div>
                                    </div>
                                </div>
                            </div>
                            <!-- Additional Education -->
                            <div id="additionalEducation"></div>
                            <div>
                                <button type="button" id="addEducationButton" class="button button-secondary">
                                    <svg style="width: 20px; height: 20px; margin-right: 8px;" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                    </svg>
                                    Add Education
                                </button>
                            </div>
                        </div>
                        
                        <div class="section-header" style="margin-top: 32px;">
                            <div class="icon-container">
                                <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                </svg>
                            </div>
                            <h2 class="section-title">Job Expectations and Details</h2>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label required-field">Job Role</label>
                                <input type="text" name="job_role" required class="form-input" maxlength="255">
                                <div class="error-message">Please enter your desired job role</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Preferred Location</label>
                                <input type="text" name="preferred_location" required class="form-input" maxlength="255">
                                <div class="error-message">Please enter your preferred location</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Notice Period</label>
                                <input type="text" name="notice_period" required class="form-input" maxlength="100">
                                <div class="error-message">Please enter your notice period</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Expected Salary</label>
                                <input type="number" name="expected_salary" class="form-input" min="0">
                                <div class="error-message">Please enter a valid salary</div>
                            </div>
                            <div class="form-group" style="grid-column: span 1;">
                                <label class="form-label required-field">Skills</label>
                                <textarea name="skills" rows="3" required class="form-textarea" id="skillsTextarea"></textarea>
                                <div class="skills-tags" id="skillsTags"></div>
                                <p style="font-size: 12px; color: #6b7280; margin-top: 8px;">Type skills and press Enter or comma to add them</p>
                                <div class="error-message">Please enter at least one skill</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Experience Status</label>
                                <select name="experience_status" required class="form-select">
                                    <option value="">Select Experience Status</option>
                                    <option value="Fresher">Fresher</option>
                                    <option value="Experienced">Experienced</option>
                                </select>
                                <div class="error-message">Please select your experience status</div>
                            </div>
                            <div id="experienceFields" style="grid-column: span 2; display: none;">
                                <div class="education-section">
                                    <h3 class="education-title">Work Experience</h3>
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label class="form-label">Years of Experience</label>
                                            <input type="number" name="years_experience" class="form-input" min="0" max="50">
                                            <div class="error-message">Please enter valid years of experience</div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Company Name</label>
                                            <input type="text" name="company_name" class="form-input" maxlength="255">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Designation</label>
                                            <input type="text" name="designation" class="form-input" maxlength="255">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Work Location</label>
                                            <input type="text" name="work_location" class="form-input" maxlength="255">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Start Date (MM/YYYY)</label>
                                            <input type="text" name="start_date" placeholder="MM/YYYY" class="form-input" maxlength="20" pattern="^(0[1-9]|1[0-2])\/[0-9]{4}$" title="Format: MM/YYYY">
                                            <div class="error-message">Please enter a valid start date (MM/YYYY)</div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">End Date (MM/YYYY)</label>
                                            <input type="text" name="end_date" placeholder="MM/YYYY" class="form-input" maxlength="20" pattern="^(0[1-9]|1[0-2])\/[0-9]{4}$" title="Format: MM/YYYY">
                                            <div class="error-message">Please enter a valid end date (MM/YYYY)</div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Last Salary</label>
                                            <input type="number" name="last_salary" class="form-input" min="0">
                                            <div class="error-message">Please enter a valid salary</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-navigation">
                            <button type="button" class="button button-secondary prev-page">Previous</button>
                            <button type="button" class="button button-primary next-page">Next</button>
                        </div>
                    </div>

                    <!-- Page 3: Additional Details and Documents -->
                    <div class="form-section" id="page3">
                        <div class="section-header">
                            <div class="icon-container">
                                <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <h2 class="section-title">Additional Details</h2>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Alternate Mobile</label>
                                <input type="tel" name="alt_mobile" class="form-input" maxlength="20" pattern="^[0-9]{10,15}$" title="10-15 digits only">
                                <div class="error-message">Please enter a valid mobile number</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">LinkedIn Profile</label>
                                <input type="url" name="linkedin" placeholder="https://linkedin.com/in/username" class="form-input" maxlength="255">
                                <div class="error-message">Please enter a valid LinkedIn URL</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">GitHub Profile</label>
                                <input type="url" name="github" placeholder="https://github.com/username" class="form-input" maxlength="255">
                                <div class="error-message">Please enter a valid GitHub URL</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Certifications</label>
                                <textarea name="certifications" rows="3" class="form-textarea"></textarea>
                                <p style="font-size: 12px; color: #6b7280; margin-top: 8px;">List any professional certifications you have</p>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Reference Name</label>
                                <input type="text" name="reference_name" class="form-input" maxlength="255">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Reference Email</label>
                                <input type="email" name="reference_email" class="form-input" maxlength="255">
                                <div class="error-message">Please enter a valid email</div>
                            </div>
                        </div>
                        
                        <div class="section-header" style="margin-top: 32px;">
                            <div class="icon-container">
                                <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                                </svg>
                            </div>
                            <h2 class="section-title">Resume</h2>
                        </div>
                        <div class="form-group">
                            <label class="form-label required-field">Upload Resume (PDF)</label>
                            <div class="file-upload" id="resumeUpload">
                                <svg class="file-upload-icon" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                                    <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                </svg>
                                <div class="file-upload-text">
                                    <label for="resume" class="file-upload-link">Upload a file</label>
                                    <input id="resume" name="resume" type="file" accept="application/pdf" required style="display: none;">
                                    <span>or drag and drop</span>
                                </div>
                                <p class="file-upload-info">PDF up to 5MB</p>
                            </div>
                            <div class="error-message">Please upload your resume</div>
                        </div>
                        
                        <div class="section-header" style="margin-top: 32px;">
                            <div class="icon-container">
                                <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                                </svg>
                            </div>
                            <h2 class="section-title">Cover Letter (Optional)</h2>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Upload Cover Letter (PDF)</label>
                            <div class="file-upload" id="coverLetterUpload">
                                <svg class="file-upload-icon" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                                    <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                </svg>
                                <div class="file-upload-text">
                                    <label for="cover_letter" class="file-upload-link">Upload a file</label>
                                    <input id="cover_letter" name="cover_letter" type="file" accept="application/pdf" style="display: none;">
                                    <span>or drag and drop</span>
                                </div>
                                <p class="file-upload-info">PDF up to 5MB</p>
                            </div>
                        </div>
                        
                        <!-- Terms and Conditions -->
                        <div style="margin-top: 32px;">
                            <label class="checkbox-label">
                                <input id="termsCheckbox" name="terms" type="checkbox" required style="margin-right: 8px;">
                                I agree to the <a href="#" id="termsLink" class="checkbox-link">Terms and Conditions</a> <span style="color: #ef4444;">*</span>
                            </label>
                            <p class="checkbox-subtext">By submitting this form, you agree to our privacy policy and terms of service.</p>
                            <div class="error-message">Please accept the terms and conditions</div>
                        </div>
                        
                        <div class="form-navigation">
                            <button type="button" class="button button-secondary prev-page">Previous</button>
                            <button type="submit" id="submitButton" class="button button-primary">
                                <svg class="submit-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                                </svg>
                                Submit Application
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-page-indicator">
                        <span id="currentPage">1</span> of 3
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-info">
                <a href="mailto:contact@astrolite.com">Contact: contact@astrolite.com</a> | 
                <a href="mailto:support@astrolite.com">Support: support@astrolite.com</a>
            </div>
            <div class="footer-copyright">
                Â© <span id="currentYear"></span> Astrolite. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Confirmation Modal -->
    <div id="confirmationModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <svg class="modal-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <h2 class="modal-title">Confirm Your Application</h2>
            </div>
            <p style="font-size: 14px; color: #6b7280; margin-bottom: 16px;">Please review your information before submitting:</p>
            
            <div class="confirmation-details">
                <div class="confirmation-section">
                    <h3 class="confirmation-section-title">Personal Details</h3>
                    <div class="confirmation-grid">
                        <div class="confirmation-item">
                            <div class="confirmation-label">Full Name</div>
                            <div class="confirmation-value" id="confirmFullName"></div>
                        </div>
                        <div class="confirmation-item">
                            <div class="confirmation-label">Email</div>
                            <div class="confirmation-value" id="confirmEmail"></div>
                        </div>
                        <div class="confirmation-item">
                            <div class="confirmation-label">Mobile</div>
                            <div class="confirmation-value" id="confirmMobile"></div>
                        </div>
                        <div class="confirmation-item">
                            <div class="confirmation-label">Date of Birth</div>
                            <div class="confirmation-value" id="confirmDob"></div>
                        </div>
                        <div class="confirmation-item">
                            <div class="confirmation-label">Gender</div>
                            <div class="confirmation-value" id="confirmGender"></div>
                        </div>
                        <div class="confirmation-item">
                            <div class="confirmation-label">Nationality</div>
                            <div class="confirmation-value" id="confirmNationality"></div>
                        </div>
                    </div>
                </div>

                <div class="confirmation-section">
                    <h3 class="confirmation-section-title">Address</h3>
                    <div class="confirmation-grid">
                        <div class="confirmation-item">
                            <div class="confirmation-label">Current Address</div>
                            <div class="confirmation-value" id="confirmCurrentAddress"></div>
                        </div>
                        <div class="confirmation-item">
                            <div class="confirmation-label">Permanent Address</div>
                            <div class="confirmation-value" id="confirmPermanentAddress"></div>
                        </div>
                        <div class="confirmation-item">
                            <div class="confirmation-label">City, State, Zipcode</div>
                            <div class="confirmation-value" id="confirmLocation"></div>
                        </div>
                    </div>
                </div>

                <div class="confirmation-section">
                    <h3 class="confirmation-section-title">Education</h3>
                    <div class="confirmation-grid">
                        <div class="confirmation-item">
                            <div class="confirmation-label">SSC</div>
                            <div class="confirmation-value" id="confirmSsc"></div>
                        </div>
                        <div class="confirmation-item">
                            <div class="confirmation-label">Intermediate</div>
                            <div class="confirmation-value" id="confirmIntermediate"></div>
                        </div>
                        <div class="confirmation-item">
                            <div class="confirmation-label">Graduation</div>
                            <div class="confirmation-value" id="confirmGraduation"></div>
                        </div>
                    </div>
                </div>

                <div class="confirmation-section">
                    <h3 class="confirmation-section-title">Job Details</h3>
                    <div class="confirmation-grid">
                        <div class="confirmation-item">
                            <div class="confirmation-label">Job Role</div>
                            <div class="confirmation-value" id="confirmJobRole"></div>
                        </div>
                        <div class="confirmation-item">
                            <div class="confirmation-label">Preferred Location</div>
                            <div class="confirmation-value" id="confirmPreferredLocation"></div>
                        </div>
                        <div class="confirmation-item">
                            <div class="confirmation-label">Experience Status</div>
                            <div class="confirmation-value" id="confirmExperienceStatus"></div>
                        </div>
                        <div class="confirmation-item">
                            <div class="confirmation-label">Skills</div>
                            <div class="confirmation-value" id="confirmSkills"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button id="cancelConfirmation" type="button" class="button button-secondary">Back to Form</button>
                <button id="confirmSubmission" type="button" class="button button-primary">Confirm and Submit</button>
            </div>
        </div>
    </div>

    <!-- Terms and Conditions Modal -->
    <div id="termsModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <svg class="modal-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <h2 class="modal-title">Terms and Conditions</h2>
            </div>
            <div style="max-height: 60vh; overflow-y: auto;">
                <div class="modal-section">
                    <h3 class="modal-section-title">1. Application Process</h3>
                    <p class="modal-section-text">
                        By submitting this application, you agree to provide accurate and truthful information about your qualifications, experience, and background. Any misrepresentation may result in disqualification from consideration or termination of employment if discovered after hiring.
                    </p>
                </div>
                <div class="modal-section">
                    <h3 class="modal-section-title">2. Data Collection and Privacy</h3>
                    <p class="modal-section-text">
                        We collect personal data as part of the recruitment process. This data will be used solely for recruitment purposes and will be stored securely in accordance with applicable data protection laws.
                    </p>
                </div>
                <div class="modal-section">
                    <h3 class="modal-section-title">3. Interview Process</h3>
                    <p class="modal-section-text">
                        If selected, you agree to participate in our interview process which may include phone screenings, technical assessments, and in-person interviews.
                    </p>
                </div>
                <div class="modal-section">
                    <h3 class="modal-section-title">4. Data Retention</h3>
                    <p class="modal-section-text">
                        Your application data will be retained for a period of 12 months from the date of submission unless you request its deletion earlier.
                    </p>
                </div>
                <div class="modal-section">
                    <h3 class="modal-section-title">5. Communication</h3>
                    <p class="modal-section-text">
                        By submitting this application, you consent to receive communications regarding your application status via email or phone.
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelTerms" type="button" class="button button-secondary">Cancel</button>
                <button id="confirmTerms" type="button" class="button button-primary">I Accept</button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal-overlay">
        <div class="modal success-modal">
            <div class="success-icon-container">
                <svg class="success-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <h2 class="success-title">Application Submitted!</h2>
            <div class="modal-section">
                <p id="successMessage" class="success-message">
                    Thank you for your application. We've received your information and will review it shortly.
                </p>
                <p class="success-message">
                    Reference ID: <span id="referenceId" class="reference-id"></span>
                </p>
            </div>
            <div style="margin-top: 20px;">
                <button id="closeSuccessModal" type="button" class="button button-primary">Close</button>
            </div>
        </div>
    </div>

    <script>
        const BASE_URL = 'http://localhost:5000';

        // Set dynamic copyright year
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Set min and max dates for DOB (18-70 years)
        document.addEventListener('DOMContentLoaded', function() {
            const dobInput = document.querySelector('input[name="dob"]');
            const today = new Date();
            const minDate = new Date();
            minDate.setFullYear(today.getFullYear() - 70);
            const maxDate = new Date();
            maxDate.setFullYear(today.getFullYear() - 18);
            
            dobInput.min = minDate.toISOString().split('T')[0];
            dobInput.max = maxDate.toISOString().split('T')[0];
        });

        // Form pagination
        const pages = document.querySelectorAll('.form-section');
        const nextButtons = document.querySelectorAll('.next-page');
        const prevButtons = document.querySelectorAll('.prev-page');
        const pageIndicator = document.getElementById('currentPage');
        let currentPage = 0;

        function showPage(pageIndex) {
            pages.forEach((page, index) => {
                page.classList.toggle('active', index === pageIndex);
            });
            pageIndicator.textContent = pageIndex + 1;
            currentPage = pageIndex;
        }

        nextButtons.forEach(button => {
            button.addEventListener('click', () => {
                if (validateCurrentPage()) {
                    showPage(currentPage + 1);
                    window.scrollTo(0, 0);
                }
            });
        });

        prevButtons.forEach(button => {
            button.addEventListener('click', () => {
                showPage(currentPage - 1);
                window.scrollTo(0, 0);
            });
        });

        function validateCurrentPage() {
            const currentPageForm = pages[currentPage];
            const requiredInputs = currentPageForm.querySelectorAll('[required]');
            let isValid = true;

            requiredInputs.forEach(input => {
                const errorMessage = input.closest('.form-group')?.querySelector('.error-message');
                if (!errorMessage) return;

                if (!input.value.trim()) {
                    input.classList.add('invalid');
                    errorMessage.style.display = 'block';
                    isValid = false;
                } else {
                    if (input.type === 'email' && !validateEmail(input.value)) {
                        input.classList.add('invalid');
                        errorMessage.style.display = 'block';
                        isValid = false;
                    } else if (input.hasAttribute('pattern') && !new RegExp(input.pattern).test(input.value)) {
                        input.classList.add('invalid');
                        errorMessage.style.display = 'block';
                        isValid = false;
                    } else if (input.name === 'dob') {
                        const dob = new Date(input.value);
                        const today = new Date();
                        const minAgeDate = new Date();
                        minAgeDate.setFullYear(today.getFullYear() - 18);
                        const maxAgeDate = new Date();
                        maxAgeDate.setFullYear(today.getFullYear() - 70);
                        
                        if (dob > minAgeDate || dob < maxAgeDate) {
                            input.classList.add('invalid');
                            errorMessage.style.display = 'block';
                            isValid = false;
                        } else {
                            input.classList.remove('invalid');
                            errorMessage.style.display = 'none';
                        }
                    } else {
                        input.classList.remove('invalid');
                        errorMessage.style.display = 'none';
                    }
                }
            });

            // Special validation for skills
            if (currentPage === 1) {
                const skillsTags = document.querySelectorAll('.skill-tag');
                const skillsError = document.getElementById('skillsTextarea').closest('.form-group').querySelector('.error-message');
                if (skillsTags.length === 0) {
                    document.getElementById('skillsTextarea').classList.add('invalid');
                    skillsError.style.display = 'block';
                    isValid = false;
                } else {
                    document.getElementById('skillsTextarea').classList.remove('invalid');
                    skillsError.style.display = 'none';
                }
            }

            // Special validation for terms checkbox
            if (currentPage === 2) {
                const termsCheckbox = document.getElementById('termsCheckbox');
                const termsError = termsCheckbox.parentElement.nextElementSibling.nextElementSibling;
                if (!termsCheckbox.checked) {
                    termsError.style.display = 'block';
                    isValid = false;
                } else {
                    termsError.style.display = 'none';
                }
            }

            if (!isValid) {
                const firstInvalid = currentPageForm.querySelector('.invalid');
                if (firstInvalid) {
                    firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }

            return isValid;
        }

        function validateEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        // Real-time validation
        document.querySelectorAll('input, select, textarea').forEach(input => {
            input.addEventListener('blur', function() {
                const errorMessage = this.closest('.form-group')?.querySelector('.error-message');
                if (!errorMessage) return;

                if (this.hasAttribute('required') && !this.value.trim()) {
                    this.classList.add('invalid');
                    errorMessage.style.display = 'block';
                } else if (this.type === 'email' && this.value && !validateEmail(this.value)) {
                    this.classList.add('invalid');
                    errorMessage.style.display = 'block';
                } else if (this.hasAttribute('pattern') && this.value && !new RegExp(this.pattern).test(this.value)) {
                    this.classList.add('invalid');
                    errorMessage.style.display = 'block';
                } else if (this.name === 'dob') {
                    const dob = new Date(this.value);
                    const today = new Date();
                    const minAgeDate = new Date();
                    minAgeDate.setFullYear(today.getFullYear() - 18);
                    const maxAgeDate = new Date();
                    maxAgeDate.setFullYear(today.getFullYear() - 70);
                    
                    if (this.value && (dob > minAgeDate || dob < maxAgeDate)) {
                        this.classList.add('invalid');
                        errorMessage.style.display = 'block';
                    } else {
                        this.classList.remove('invalid');
                        errorMessage.style.display = 'none';
                    }
                } else {
                    this.classList.remove('invalid');
                    errorMessage.style.display = 'none';
                }
            });
        });

        // Skills handling
        const skillsTextarea = document.getElementById('skillsTextarea');
        const skillsTags = document.getElementById('skillsTags');

        skillsTextarea.addEventListener('keydown', (event) => {
            if (event.key === 'Enter' || event.key === ',') {
                event.preventDefault();
                const skill = skillsTextarea.value.trim();
                if (skill) {
                    addSkill(skill);
                    skillsTextarea.value = '';
                }
            }
        });

        function addSkill(skill) {
            const tag = document.createElement('span');
            tag.className = 'skill-tag';
            tag.textContent = skill;
            const removeButton = document.createElement('span');
            removeButton.className = 'remove-skill';
            removeButton.textContent = 'Ã';
            removeButton.addEventListener('click', () => tag.remove());
            tag.appendChild(removeButton);
            skillsTags.appendChild(tag);
        }

        // File upload handling
        function setupFileUpload(inputId, containerId) {
            const input = document.getElementById(inputId);
            const container = document.getElementById(containerId);
            
            if (!input || !container) {
                console.error(`Element not found: inputId=${inputId}, containerId=${containerId}`);
                return;
            }

            input.addEventListener('change', (event) => {
                const file = event.target.files[0];
                if (file) {
                    if (file.size > 5 * 1024 * 1024) {
                        alert('File size exceeds 5MB limit');
                        input.value = '';
                        return;
                    }
                    if (file.type !== 'application/pdf') {
                        alert('Please upload a PDF file');
                        input.value = '';
                        return;
                    }
                    container.classList.add('has-file');
                    container.innerHTML = `
                        <div class="file-preview">
                            <div class="file-info">
                                <span class="file-name">${file.name}</span>
                                <span class="file-type">${file.type}</span>
                            </div>
                            <button type="button" class="remove-file">Remove</button>
                        </div>
                    `;
                    container.querySelector('.remove-file').addEventListener('click', () => removeFile(inputId, containerId));
                }
            });

            container.addEventListener('dragover', (event) => {
                event.preventDefault();
                container.style.borderColor = '#2563eb';
            });

            container.addEventListener('dragleave', () => {
                container.style.borderColor = '#d1d5db';
            });

            container.addEventListener('drop', (event) => {
                event.preventDefault();
                container.style.borderColor = '#d1d5db';
                const file = event.dataTransfer.files[0];
                if (file && file.type === 'application/pdf') {
                    input.files = event.dataTransfer.files;
                    input.dispatchEvent(new Event('change'));
                } else {
                    alert('Please upload a PDF file');
                }
            });
        }

        function removeFile(inputId, containerId) {
            const input = document.getElementById(inputId);
            const container = document.getElementById(containerId);
            
            if (!input || !container) {
                console.error(`Element not found: inputId=${inputId}, containerId=${containerId}`);
                return;
            }
            
            input.value = '';
            container.classList.remove('has-file');
            container.innerHTML = `
                <svg class="file-upload-icon" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                    <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
                <div class="file-upload-text">
                    <label for="${inputId}" class="file-upload-link">Upload a file</label>
                    <input id="${inputId}" name="${inputId}" type="file" accept="application/pdf" ${inputId === 'resume' ? 'required' : ''} style="display: none;">
                    <span>or drag and drop</span>
                </div>
                <p class="file-upload-info">PDF up to 5MB</p>
            `;
        }

        setupFileUpload('resume', 'resumeUpload');
        setupFileUpload('cover_letter', 'coverLetterUpload');

        // Additional education
        let educationCount = 0;

        document.getElementById('addEducationButton').addEventListener('click', () => {
            educationCount++;
            const educationSection = document.createElement('div');
            educationSection.className = 'education-section';
            educationSection.id = `education${educationCount}`;
            educationSection.innerHTML = `
                <h3 class="education-title">Additional Education</h3>
                <button type="button" class="remove-education">Remove</button>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Institution Name</label>
                        <input type="text" name="additional_education[${educationCount}][institution]" class="form-input" maxlength="255">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Qualification</label>
                        <input type="text" name="additional_education[${educationCount}][qualification]" class="form-input" maxlength="255">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Year</label>
                        <input type="number" name="additional_education[${educationCount}][year]" min="1960" max="2035" class="form-input">
                        <div class="error-message">Please enter a valid year</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Percentage</label>
                        <input type="text" name="additional_education[${educationCount}][percentage]" class="form-input" maxlength="10" pattern="^[0-9.]+$">
                        <div class="error-message">Please enter a valid percentage</div>
                    </div>
                </div>
            `;
            document.getElementById('additionalEducation').appendChild(educationSection);
            educationSection.querySelector('.remove-education').addEventListener('click', () => {
                educationSection.remove();
            });
        });

        // Experience status handling
        document.querySelector('select[name="experience_status"]').addEventListener('change', (event) => {
            const experienceFields = document.getElementById('experienceFields');
            experienceFields.style.display = event.target.value === 'Experienced' ? 'block' : 'none';
        });

        // Modal handling
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        document.getElementById('termsLink').addEventListener('click', (event) => {
            event.preventDefault();
            openModal('termsModal');
        });

        document.getElementById('cancelTerms').addEventListener('click', () => {
            closeModal('termsModal');
        });

        document.getElementById('confirmTerms').addEventListener('click', () => {
            document.getElementById('termsCheckbox').checked = true;
            closeModal('termsModal');
        });

        document.getElementById('cancelConfirmation').addEventListener('click', () => {
            closeModal('confirmationModal');
        });

        document.getElementById('closeSuccessModal').addEventListener('click', () => {
            closeModal('successModal');
        });

        // Form submission
        document.getElementById('applicationForm').addEventListener('submit', async (event) => {
            event.preventDefault();
            if (!validateCurrentPage()) return;

            const form = document.getElementById('applicationForm');
            openModal('confirmationModal');
            populateConfirmationModal();

            document.getElementById('confirmSubmission').addEventListener('click', async () => {
                const formData = new FormData(form);
                const skills = Array.from(document.querySelectorAll('.skill-tag')).map(tag => tag.textContent.replace('Ã', '').trim());
                formData.set('skills', skills.join(', '));

                // Validate additional education
                const additionalEducation = [];
                document.querySelectorAll('.education-section[id^="education"]').forEach(section => {
                    const education = {};
                    section.querySelectorAll('input').forEach(input => {
                        const match = input.name.match(/additional_education\[(\d+)\]\[(\w+)\]/);
                        if (match) {
                            education[match[2]] = input.value || null;
                        }
                    });
                    if (Object.values(education).some(val => val)) {
                        additionalEducation.push(education);
                    }
                });
                if (additionalEducation.length > 0) {
                    formData.set('additional_education', JSON.stringify(additionalEducation));
                }

                const submitButton = document.getElementById('submitButton');
                submitButton.disabled = true;
                submitButton.innerHTML = `
                    <svg class="submit-icon animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9H4m4 8H4v-5h.582a8.001 8.001 0 0015.356-2"></path>
                    </svg>
                    Submitting...
                `;

                try {
                    const response = await fetch(`${BASE_URL}/api/submit`, {
                        method: 'POST',
                        body: formData
                    });
                    const result = await response.json();
                    if (response.ok) {
                        closeModal('confirmationModal');
                        document.getElementById('referenceId').textContent = `APP-${new Date().getFullYear()}-${result.id.toString().padStart(5, '0')}`;
                        openModal('successModal');
                        form.reset();
                        document.getElementById('skillsTags').innerHTML = '';
                        document.getElementById('additionalEducation').innerHTML = '';
                        educationCount = 0;
                        document.getElementById('resumeUpload').classList.remove('has-file');
                        document.getElementById('coverLetterUpload').classList.remove('has-file');
                        showPage(0);
                        document.getElementById('termsCheckbox').checked = false;
                    } else {
                        alert(`Error submitting form: ${result.error}${result.missing ? ' - Missing fields: ' + result.missing.join(', ') : ''}`);
                    }
                } catch (error) {
                    console.error('Submission error:', error);
                    alert('An error occurred while submitting the form.');
                } finally {
                    submitButton.disabled = false;
                    submitButton.innerHTML = `
                        <svg class="submit-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                        </svg>
                        Submit Application
                    `;
                }
            }, { once: true });
        });

        function populateConfirmationModal() {
            const form = document.getElementById('applicationForm');
            const getValue = (name) => form.querySelector(`[name="${name}"]`)?.value || 'Not provided';
            
            document.getElementById('confirmFullName').textContent = getValue('full_name');
            document.getElementById('confirmEmail').textContent = getValue('email');
            document.getElementById('confirmMobile').textContent = getValue('mobile');
            document.getElementById('confirmDob').textContent = getValue('dob');
            document.getElementById('confirmGender').textContent = getValue('gender');
            document.getElementById('confirmNationality').textContent = getValue('nationality');
            document.getElementById('confirmCurrentAddress').textContent = getValue('current_address');
            document.getElementById('confirmPermanentAddress').textContent = getValue('permanent_address');
            document.getElementById('confirmLocation').textContent = `${getValue('city')}, ${getValue('state')} ${getValue('zipcode')}`;
            document.getElementById('confirmSsc').textContent = `${getValue('ssc_board')} (${getValue('ssc_year')}, ${getValue('ssc_percentage')}%)`;
            document.getElementById('confirmIntermediate').textContent = getValue('intermediate_board') ? `${getValue('intermediate_board')} (${getValue('intermediate_year')}, ${getValue('intermediate_percentage')}%)` : 'Not provided';
            document.getElementById('confirmGraduation').textContent = getValue('college_name') ? `${getValue('college_name')} (${getValue('qualification')}, ${getValue('graduation_year')}, ${getValue('graduation_percentage')}%)` : 'Not provided';
            document.getElementById('confirmJobRole').textContent = getValue('job_role');
            document.getElementById('confirmPreferredLocation').textContent = getValue('preferred_location');
            document.getElementById('confirmExperienceStatus').textContent = getValue('experience_status');
            document.getElementById('confirmSkills').textContent = Array.from(document.querySelectorAll('.skill-tag')).map(tag => tag.textContent.replace('Ã', '').trim()).join(', ') || 'None';
        }
    </script>
</body>
</html>